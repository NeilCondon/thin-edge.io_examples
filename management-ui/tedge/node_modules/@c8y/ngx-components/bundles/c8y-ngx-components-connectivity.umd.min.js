!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@c8y/ngx-components"),require("rxjs"),require("rxjs/operators"),require("@angular/router"),require("@c8y/client"),require("@angular/forms"),require("ngx-bootstrap/popover"),require("lodash-es")):"function"==typeof define&&define.amd?define("@c8y/ngx-components/connectivity",["exports","@angular/core","@c8y/ngx-components","rxjs","rxjs/operators","@angular/router","@c8y/client","@angular/forms","ngx-bootstrap/popover","lodash-es"],e):e(((t=t||self).c8y=t.c8y||{},t.c8y["ngx-components"]=t.c8y["ngx-components"]||{},t.c8y["ngx-components"].connectivity={}),t.ng.core,t.c8y["ngx-components"],t.rxjs,t.rxjs.operators,t.ng.router,t.client,t.ng.forms,t.popover,t.lodashEs)}(this,(function(t,e,n,r,o,i,a,s,c,l){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var u=function(t,e){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function p(t,e){function n(){this.constructor=t}u(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var d=function(){return(d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function f(t,e,n,r){var o,i=arguments.length,a=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(e,n,a):o(e,n))||a);return i>3&&a&&Object.defineProperty(e,n,a),a}function h(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function v(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function g(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var y,m=function(){function t(t,e){this.router=t,this.guard=e}return t.prototype.get=function(){return this.router.url.match(/connectivitySettings/g)?this.tab():[]},t.prototype.tab=function(){var t=this;return this.wrapIntoObservable(this.guard.canActivate(this.router.routerState.snapshot.root,this.router.routerState.snapshot)).pipe(o.map((function(e){return e?t.config():null})))},t.prototype.isPromise=function(t){return!!t&&"function"==typeof t.then},t.prototype.wrapIntoObservable=function(t){return r.isObservable(t)?t:this.isPromise(t)?r.from(t):r.of(t)},t}(),C=function(){function t(t){this.tabFactory=t,this.connectivityNode=new n.NavigatorNode({parent:n.gettext("Settings"),label:n.gettext("Connectivity"),path:"connectivitySettings",icon:"plug",preventDuplicates:!0})}return t.prototype.get=function(){var t=this;return this.wrapIntoObservable(this.tabFactory.tab()).pipe(o.map((function(e){return e?[t.connectivityNode]:[]})))},t.prototype.wrapIntoObservable=function(t){return r.isObservable(t)?t:r.of(t)},t.ctorParameters=function(){return[{type:m}]},t=f([e.Injectable()],t)}(),b=function(){function t(t){this.applicationService=t}var n;return n=t,t.prototype.canActivate=function(t,e){return void 0===this.showActilityProvider&&(this.showActilityProvider=this.applicationService.isAvailable(n.applicationName).then((function(t){return t&&t.data}))),this.showActilityProvider},t.applicationName="actility",t.ctorParameters=function(){return[{type:a.ApplicationService}]},t=n=f([e.Injectable()],t)}(),S=function(t){function r(e,r){var o=t.call(this,e,r)||this;return o.router=e,o.guard=r,o.tabConfig={label:n.gettext("Actility LoRa provider settings"),path:"/connectivitySettings/actility_lora_provider_settings",icon:"c8y-device"},o}return p(r,t),r.prototype.config=function(){return this.tabConfig},r.ctorParameters=function(){return[{type:i.Router},{type:b}]},r=f([e.Injectable()],r)}(m),L=function(t){function n(e){var n=t.call(this,e)||this;return n.tabFactory=e,n}return p(n,t),n.ctorParameters=function(){return[{type:S}]},n=f([e.Injectable()],n)}(C),N=function(){function t(){}return t=f([e.NgModule({providers:[b,S,{provide:n.HOOK_NAVIGATOR_NODES,useClass:L,multi:!0},{provide:n.HOOK_TABS,useClass:S,multi:!0}]})],t)}(),x=function(){function t(t){this.client=t,this.microserviceUrl="/service/impact/connectivity",this.header={"Content-Type":"application/json"}}return t.prototype.getOptions=function(){var t={method:"GET",headers:this.header};return this.client.fetch(""+this.microserviceUrl,t)},t.prototype.updateOptions=function(t){var e={method:"POST",headers:this.header,body:JSON.stringify(t)};return this.client.fetch(""+this.microserviceUrl,e)},t.prototype.deleteOptions=function(){var t={method:"DELETE",headers:this.header};return this.client.fetch(""+this.microserviceUrl,t)},t.ctorParameters=function(){return[{type:a.FetchClient}]},t=f([e.Injectable()],t)}(),O=function(){function t(t){this.applicationService=t}var n;return n=t,t.prototype.canActivate=function(t,e){return void 0===this.showImpactProvider&&(this.showImpactProvider=this.applicationService.isAvailable(n.applicationName).then((function(t){return t&&t.data}))),this.showImpactProvider},t.applicationName="impact",t.ctorParameters=function(){return[{type:a.ApplicationService}]},t=n=f([e.Injectable()],t)}(),w=function(){function t(t,e){this.router=t,this.guard=e,this.config={label:n.gettext("IMPACT provider settings"),path:"/connectivitySettings/impact_provider_settings",icon:"plug"}}return t.prototype.get=function(){return this.router.url.match(/connectivitySettings/g)?this.tab():[]},t.prototype.tab=function(){var t=this;return this.wrapIntoObservable(this.guard.canActivate(this.router.routerState.snapshot.root,this.router.routerState.snapshot)).pipe(o.map((function(e){return e?t.config:null})))},t.prototype.isPromise=function(t){return!!t&&"function"==typeof t.then},t.prototype.wrapIntoObservable=function(t){return r.isObservable(t)?t:this.isPromise(t)?r.from(t):r.of(t)},t.ctorParameters=function(){return[{type:i.Router},{type:O}]},t=f([e.Injectable()],t)}(),I=function(){function t(t){this.tabFactory=t,this.connectivityNode=new n.NavigatorNode({parent:n.gettext("Settings"),label:n.gettext("Connectivity"),path:"connectivitySettings",icon:"plug",preventDuplicates:!0})}return t.prototype.get=function(){var t=this;return this.wrapIntoObservable(this.tabFactory.tab()).pipe(o.map((function(e){return e?[t.connectivityNode]:[]})))},t.prototype.wrapIntoObservable=function(t){return r.isObservable(t)?t:r.of(t)},t.ctorParameters=function(){return[{type:w}]},t=f([e.Injectable()],t)}();(y=t.TenantConnectionStatus||(t.TenantConnectionStatus={})).NO_CONNECTION="NO_CONNECTION",y.CONNECTING_IN_PROGRESS="CONNECTING_IN_PROGRESS",y.CONNECTED_SUCCESSFULLY="CONNECTED_SUCCESSFULLY",y.CONNECTED_FAILED="CONNECTED_FAILED",y.UNKNOWN="UNKNOWN";var E=function(){function r(t,e,n,r){this.impactService=t,this.formBuilder=e,this.modal=n,this.alert=r,this.isEdit=!1,this.credentialsExist=!1}return r.prototype.ngOnInit=function(){return h(this,void 0,void 0,(function(){var t,e;return v(this,(function(n){switch(n.label){case 0:return this.initForm(),[4,this.impactService.getOptions()];case 1:return t=n.sent(),e=this,[4,t.json()];case 2:return e.connectionStatus=n.sent(),this.connectionStatus&&this.connectionStatus.options?(this.formGroup.patchValue(d({},this.connectionStatus.options)),this.credentialsExist=!0):this.isEdit=!0,[2]}}))}))},r.prototype.replaceCredentials=function(){this.isEdit=!0},r.prototype.saveCredentials=function(){return h(this,void 0,void 0,(function(){var e,r;return v(this,(function(o){switch(o.label){case 0:return this.formGroup.valid?(this.connectionStatus.status=t.TenantConnectionStatus.CONNECTING_IN_PROGRESS,[4,this.safelyUpdateCredentials(this.formGroup.value)]):[3,5];case 1:return o.sent()?[4,this.impactService.getOptions()]:[3,4];case 2:return e=o.sent(),r=this,[4,e.json()];case 3:return r.connectionStatus=o.sent(),this.connectionStatus.status===t.TenantConnectionStatus.CONNECTED_SUCCESSFULLY&&(this.isEdit=!1),this.alert.success(n.gettext("Credentials saved.")),[3,5];case 4:this.connectionStatus.status=t.TenantConnectionStatus.UNKNOWN,o.label=5;case 5:return[2]}}))}))},r.prototype.deleteCredentials=function(){return h(this,void 0,void 0,(function(){return v(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,this.modal.confirm(n.gettext("Delete credentials"),n.gettext("You are about to delete your IMPACT credentials. Deleting credentials will break connection to IMPACT instance. Do you want to proceed?"),n.Status.DANGER,{ok:n.gettext("Delete"),cancel:n.gettext("Cancel")})];case 1:return t.sent(),[4,this.safelyDeleteCredentials()];case 2:return t.sent(),[3,4];case 3:return t.sent(),[3,4];case 4:return[2]}}))}))},r.prototype.initForm=function(){this.formGroup=this.formBuilder.group({baseUrl:[],user:["",s.Validators.required],password:["",s.Validators.required],groupName:[],initializeDevices:[!1]})},r.prototype.resetForm=function(){this.formGroup.reset()},r.prototype.safelyUpdateCredentials=function(t){return h(this,void 0,void 0,(function(){var e,n,r,o;return v(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),[4,this.impactService.updateOptions(t)];case 1:return(e=i.sent())&&200!==e.status?e.json?[4,e.json()]:[3,3]:[3,5];case 2:return r=i.sent(),[3,4];case 3:r=void 0,i.label=4;case 4:return n=r,this.alert.addServerFailure({data:n,res:e}),[2,Promise.resolve(!1)];case 5:return[2,Promise.resolve(!0)];case 6:return[3,8];case 7:return o=i.sent(),this.alert.addServerFailure(o),[2,Promise.resolve(!1)];case 8:return[2]}}))}))},r.prototype.safelyDeleteCredentials=function(){return h(this,void 0,void 0,(function(){var t,e,r,o;return v(this,(function(i){switch(i.label){case 0:return i.trys.push([0,7,,8]),[4,this.impactService.deleteOptions()];case 1:return(t=i.sent())&&200!==t.status?t.json?[4,t.json()]:[3,3]:[3,5];case 2:return r=i.sent(),[3,4];case 3:r=void 0,i.label=4;case 4:return e=r,this.alert.addServerFailure({data:e,res:t}),[3,6];case 5:this.credentialsExist=!1,this.resetForm(),this.connectionStatus=null,this.alert.success(n.gettext("Credentials deleted.")),i.label=6;case 6:return[3,8];case 7:return o=i.sent(),this.alert.addServerFailure(o),[3,8];case 8:return[2]}}))}))},r.ctorParameters=function(){return[{type:x},{type:s.FormBuilder},{type:n.ModalService},{type:n.AlertService}]},r=f([e.Component({selector:"c8y-impact-provider-settings",template:'<div class="row">\n  <div class="col-xs-12 col-md-8">\n    <form class="card card--fullpage"\n      [formGroup]="formGroup"\n      novalidate\n    >\n      <div class="card-header separator">\n        <h4 class="card-title" translate>Credentials</h4>\n      </div>\n      <div class="inner-scroll">\n        <div class="card-block" *ngIf="isEdit">\n          <c8y-form-group>\n            <label for="baseUrl" translate>\n              Base URL\n            </label>\n            <input\n              id="baseUrl"\n              name="baseUrl"\n              type="text"\n              class="form-control"\n              placeholder="{{ \'e.g. https://impact.example.com\' | translate }}"\n              autocomplete="off"\n              formControlName="baseUrl"\n            />\n          </c8y-form-group>\n          <c8y-form-group>\n            <label for="user" translate>\n              User\n            </label>\n            <input\n              id="user"\n              name="user"\n              type="text"\n              class="form-control"\n              placeholder="{{ \'e.g. joe`LOCALIZE`\' | translate }}"\n              required\n              autocomplete="off"\n              formControlName="user"\n            />\n            <c8y-messages>\n              <c8y-message *ngIf="formGroup?.controls?.user?.errors?.required" translate>\n                This field is required.\n              </c8y-message>\n            </c8y-messages>\n          </c8y-form-group>\n          <c8y-form-group>\n            <label for="password" translate>\n              Password\n            </label>\n            <input\n              id="password"\n              name="password"\n              type="password"\n              class="form-control"\n              placeholder="{{ \'e.g. my_password\' | translate }}"\n              required\n              autocomplete="off"\n              formControlName="password"\n            />\n            <c8y-messages>\n              <c8y-message *ngIf="formGroup?.controls?.password?.errors?.required" translate>\n                This field is required.\n              </c8y-message>\n            </c8y-messages>\n          </c8y-form-group>\n          <c8y-form-group>\n            <label for="groupName" translate>\n              IMPACT group name prefix\n            </label>\n            <input\n              id="groupName"\n              name="groupName"\n              type="text"\n              class="form-control"\n              placeholder="{{ \'e.g. Europe.Nokia`LOCALIZE`\' | translate }}"\n              formControlName="groupName"\n            />\n          </c8y-form-group>\n        </div>\n        <div class="card-block bg-gray-white">\n          <div class="d-flex">\n            <c8y-status-display\n              [status]="connectionStatus?.status"\n              [baseUrl]="connectionStatus?.options?.baseUrl"\n            ></c8y-status-display>\n\n            <div class="d-flex flex-item-middle flex-item-right">\n              <label class="c8y-switch">\n                <input type="checkbox" formControlName="initializeDevices" />\n                <span></span> {{ \'Refresh devices\' | translate }}\n              </label>\n              <a\n                container="body"\n                class="btn-clean m-l-4 flex-item-middle"\n                popover="{{ \'Refresh device resources as part of connecting\' | translate }}"\n                placement="right"\n                outsideClick="false"\n              >\n                <i c8yIcon="question-circle-o text-primary"></i>\n              </a>\n            </div>\n          </div>\n        </div>\n        <div class="card-block" *ngIf="credentialsExist && !isEdit">\n          <p translate>\n            Credentials already provided.<br />\n            Click "Replace credentials" below to overwrite them.\n          </p>\n        </div>\n      </div>\n      <div class="card-footer separator">\n        <button class="btn btn-default"\n          title="{{ \'Replace credentials\' | translate }}"\n          type="submit"\n          *ngIf="!isEdit"\n          (click)="replaceCredentials()"\n        >\n          {{ \'Replace credentials\' | translate }}\n        </button>\n        <button class="btn btn-danger"\n          title="{{ \'Delete credentials\' | translate }}"\n          type="button"\n          *ngIf="credentialsExist && isEdit"\n          (click)="deleteCredentials()"\n        >\n          {{ \'Delete credentials\' | translate }}\n        </button>\n        <button class="btn btn-primary"\n          title="{{ \'Save credentials & connect\' | translate }}"\n          type="button"\n          *ngIf="isEdit"\n          [disabled]="formGroup.invalid"\n          (click)="saveCredentials()"\n        >\n          {{ \'Save credentials & connect\' | translate }}\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n'})],r)}(),P=function(){function r(){}return Object.defineProperty(r.prototype,"status",{set:function(e){switch(e){case t.TenantConnectionStatus.CONNECTED_SUCCESSFULLY:this.icon="success",this.statusName=n.gettext("Connected successfully");break;case t.TenantConnectionStatus.CONNECTED_FAILED:this.icon="failed",this.statusName=n.gettext("Connection failed");break;case t.TenantConnectionStatus.CONNECTING_IN_PROGRESS:this.icon="connecting",this.statusName=n.gettext("Connection in progress");break;case t.TenantConnectionStatus.NO_CONNECTION:this.icon="no-connection",this.statusName=n.gettext("No connection");break;default:this.icon="unknown",this.statusName=n.gettext("Unknown`connection status`")}},enumerable:!0,configurable:!0}),f([e.Input()],r.prototype,"baseUrl",void 0),f([e.Input()],r.prototype,"status",null),r=f([e.Component({selector:"c8y-status-display",template:'<div class="d-flex">\n  <div class="dot dot-64 p-16"\n    [ngClass]="{\n      \'dot-success\': icon === \'success\',\n      \'dot-danger\': icon === \'failed\',\n      \'dot-info\': icon === \'connecting\',\n      \'dot-default\': icon === \'no-connection\' || icon === \'unknown\'\n    }"\n  >\n    \x3c!-- unknown--\x3e\n    <svg viewBox="0 0 17 23" *ngIf="icon === \'unknown\'">\n        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n            <g id="Artboard" transform="translate(-24.000000, -20.000000)" fill="currentColor" fill-rule="nonzero">\n                <path d="M34.4437635,36.1999921 C34.8390765,36.1999921 35.1312643,35.7531166 35.1312643,35.3749911 C35.1312643,34.8765531 35.7672026,33.6906141 36.7812663,33.1062384 C38.4140808,32.1952999 40.6312709,30.9406109 40.6312709,27.674982 C40.6312709,23.7390398 36.506266,20.7999738 32.8281366,20.7999738 C29.3218824,20.7999738 26.7093793,22.2952881 24.8531271,25.3718542 C24.6640644,25.6812296 24.7328144,26.059355 25.0250023,26.2827928 L27.8437557,28.4312329 C27.9812558,28.5171705 28.118756,28.568733 28.2734437,28.568733 C28.4625064,28.568733 28.6687566,28.4656079 28.8062568,28.2937327 C29.8203205,27.0218562 30.232821,26.6093557 30.6453215,26.3171679 C31.0234469,26.059355 31.7281353,25.8187298 32.5015737,25.8187298 C33.8937629,25.8187298 35.1484519,26.6781058 35.1484519,27.6406069 C35.1484519,28.7406082 34.5984512,29.3077964 33.2750121,29.9093596 C31.7625103,30.5968605 29.7000079,32.3843626 29.7000079,34.4640526 L29.7000079,35.237491 C29.7000079,35.6156164 29.9406332,36.1999921 30.3187586,36.1999921 L34.4437635,36.1999921 Z M34.5125136,42.7999934 C34.8906391,42.7999934 35.2000079,42.4906246 35.2000079,42.1124992 L35.2000079,37.9874943 C35.2000079,37.6093688 34.8906391,37.2999934 34.5125136,37.2999934 L30.3875087,37.2999934 C30.0093832,37.2999934 29.7000079,37.6093688 29.7000079,37.9874943 L29.7000079,42.1124992 C29.7000079,42.4906246 30.0093832,42.7999934 30.3875087,42.7999934 L34.5125136,42.7999934 Z" id=""></path>\n            </g>\n        </g>\n    </svg>\n    \x3c!-- no connection --\x3e\n    <svg viewBox="0 0 32 32" *ngIf="icon === \'no-connection\'">\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n          <g id="Artboard-Copy" transform="translate(-16.000000, -16.000000)" fill="currentColor" fill-rule="nonzero">\n              <path d="M36.090359,41.560381 L32.5058901,45.1435604 C28.9330257,48.7177143 23.134696,48.7177143 19.5592528,45.1435604 C15.9850989,41.5681172 15.9863883,35.7710769 19.5592528,32.1969231 L23.1424323,28.6137436 L25.8772015,31.3485128 L22.294022,34.9316923 C20.2335971,36.9921172 20.2335971,40.3470769 22.294022,42.4062125 C24.3570257,44.4692161 27.710696,44.4692161 29.7711209,42.4062125 L33.3543004,38.8256117 L36.090359,41.560381 L36.090359,41.560381 Z M32.1964396,19.5597363 L28.6132601,23.1429158 L31.3480293,25.877685 L34.9324982,22.2945055 C36.9929231,20.2340806 40.3465934,20.2340806 42.4044396,22.2957949 C44.470022,24.3562198 44.470022,27.7098901 42.4095971,29.770315 L38.8264176,33.3534945 L41.5611868,36.0882637 L45.1443663,32.5063736 C48.7172308,28.9309304 48.7172308,23.1338901 45.1443663,19.5597363 C41.5676337,15.9855824 35.7705934,15.9855824 32.1964396,19.5597363 Z M24.5310916,18.5346813 L26.3877949,18.2716484 L26.9525421,22.2467985 L25.0984176,22.5111209 L24.5310916,18.5346813 L24.5310916,18.5346813 Z M18.2711649,26.386989 L18.5367766,24.5289963 L22.5132161,25.0963223 L22.2476044,26.9530256 L18.2711649,26.386989 Z M24.4511502,23.1364689 L23.1256704,24.4645275 L20.2825934,21.6240293 L21.6093627,20.2972601 L24.4511502,23.1364689 L24.4511502,23.1364689 Z M40.1699487,46.1647473 L38.3119561,46.4277802 L37.7472088,42.45263 L39.6026227,42.1883077 L40.1699487,46.1647473 L40.1699487,46.1647473 Z M46.4311649,38.3124396 L46.1642638,40.1704322 L42.1878242,39.6043956 L42.4547253,37.7464029 L46.4311649,38.3124396 Z M40.2511795,41.5616703 L41.57537,40.2349011 L44.4184469,43.0766886 L43.0916777,44.4034579 L40.2511795,41.5616703 Z" id="Shape-Copy-2"></path>\n          </g>\n      </g>\n  </svg>\n    \x3c!-- Connecting --\x3e\n    <svg viewBox="0 0 29 32" class="icon-spin" *ngIf="icon === \'connecting\'">\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Artboard-Copy-2" transform="translate(-17.000000, -16.000000)" fill="currentColor" fill-rule="nonzero">\n          <path d="M39.7170667,23.98025 L41.3802667,22.0206 C42.31325,22.9163667 43.1179,23.9391833 43.7788167,25.0608167 L41.4996167,26.2556 C40.9991167,25.424 40.4049333,24.6565667 39.7170667,23.98025 Z M44.6502,26.7766333 L42.3568833,27.9791167 C42.6841333,28.8094333 42.9151333,29.68595 43.0409,30.5958333 L45.6345167,30.5958333 C45.4843667,29.2573167 45.1494167,27.9752667 44.6502,26.7766333 L44.6502,26.7766333 Z M25.6440333,22.3363 C27.3868,21.2711333 29.4273,20.65 31.6166667,20.65 C34.0793833,20.65 36.3585833,21.4302667 38.2348167,22.7495333 L39.9005833,20.7873167 C37.5726167,19.0946 34.7159167,18.0833333 31.6166667,18.0833333 C28.8818833,18.0833333 26.3473,18.8841333 24.18745,20.23035 L21.8132833,16.8 L19.05155,25.7833333 L28.0271833,25.7833333 L25.6440333,22.3363 L25.6440333,22.3363 Z M43.1512667,32.5208333 C43.1166167,33.7554 42.8869,34.9399167 42.4916333,36.05 L45.1879167,36.05 C45.5074667,34.9232333 45.7025333,33.7425667 45.7333333,32.5208333 L43.1512667,32.5208333 Z M23.5162667,40.41975 L21.85435,42.3794 C20.9213667,41.4836333 20.1154333,40.4608167 19.4558,39.3391833 L21.7337167,38.1444 C22.2342167,38.976 22.8284,39.7434333 23.5162667,40.41975 L23.5162667,40.41975 Z M18.5831333,37.6233667 L20.87645,36.4208833 C20.5504833,35.5905667 20.3194833,34.71405 20.1924333,33.8041667 L17.5975333,33.8041667 C17.75025,35.1426833 18.0839167,36.4247333 18.5831333,37.6233667 Z M37.5893,42.0637 C35.8478167,43.1288667 33.8073167,43.75 31.6166667,43.75 C29.1552333,43.75 26.87475,42.9697333 24.9998,41.6504667 L23.33275,43.6126833 C25.6607167,45.3054 28.5187,46.3166667 31.6166667,46.3166667 C34.35145,46.3166667 36.8873167,45.5158667 39.0458833,44.16965 L41.42005,47.6 L44.1817833,38.6166667 L35.20615,38.6166667 L37.5893,42.0637 L37.5893,42.0637 Z M20.0820667,31.8791667 C20.1167167,30.6446 20.3477167,29.4600833 20.7404167,28.35 L18.0454167,28.35 C17.7258667,29.4767667 17.5295167,30.6574333 17.5,31.8791667 L20.0820667,31.8791667 Z" id="Shape" transform="translate(31.616667, 32.200000) scale(-1, 1) translate(-31.616667, -32.200000) "></path>\n        </g>\n      </g>\n    </svg>\n    \x3c!-- Failed --\x3e\n    <svg viewBox="0 0 28 27" *ngIf="icon === \'failed\'">\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Artboard-Copy-3" transform="translate(-18.000000, -18.000000)" fill="currentColor" fill-rule="nonzero">\n          <path d="M32.1000157,45.0000026 C39.3875244,45.0000026 45.3000315,39.0874956 45.3000315,31.7999869 C45.3000315,24.5124782 39.3875244,18.5999712 32.1000157,18.5999712 C24.812507,18.5999712 18.9,24.5124782 18.9,31.7999869 C18.9,39.0874956 24.812507,45.0000026 32.1000157,45.0000026 Z M33.6812676,34.5499902 L30.5015763,34.5499902 C30.1750134,34.5499902 29.9172006,34.3609274 29.9172006,34.1203022 L29.6250128,23.4468519 C29.6250128,23.3265393 29.6765753,23.2062266 29.796888,23.1374766 C29.9000131,23.051539 30.0547008,22.9999764 30.2093885,22.9999764 L33.990643,22.9999764 C34.1453307,22.9999764 34.3000184,23.051539 34.4031435,23.1374766 C34.5234561,23.2062266 34.5750187,23.3265393 34.5750187,23.4468519 L34.2656433,34.1203022 C34.2484558,34.3609274 33.990643,34.5499902 33.6812676,34.5499902 Z M33.7672052,40.5999974 L30.4672013,40.5999974 C30.1578259,40.5999974 29.9000131,40.3421846 29.9000131,40.0328092 L29.9000131,36.7671803 C29.9000131,36.4578049 30.1578259,36.1999921 30.4672013,36.1999921 L33.7672052,36.1999921 C34.0593931,36.1999921 34.3000184,36.4578049 34.3000184,36.7671803 L34.3000184,40.0328092 C34.3000184,40.3421846 34.0593931,40.5999974 33.7672052,40.5999974 Z" id=""></path>\n        </g>\n      </g>\n    </svg>\n    \x3c!-- Success --\x3e\n    <svg viewBox="0 0 31 31" *ngIf="icon === \'success\'">\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g id="Artboard-Copy-4" transform="translate(-17.000000, -17.000000)" fill="currentColor" fill-rule="nonzero">\n          <path d="M24.9403042,28.1887417 C25.5036875,27.6253583 26.1286708,27.1607917 26.7934375,26.7937583 C30.4984208,24.751975 35.2493208,25.837675 37.6311875,29.448975 L34.7488208,32.3300583 C33.9223542,30.4448417 31.8703042,29.371975 29.8285208,29.8288417 C29.0598042,30.0008083 28.3295875,30.384525 27.7328375,30.981275 L22.2093708,36.5073083 C20.5320542,38.184625 20.5320542,40.9129917 22.2093708,42.5903083 C23.8866875,44.267625 26.6150542,44.267625 28.2923708,42.5903083 L29.9953542,40.887325 C31.5443375,41.5020417 33.2049708,41.7471583 34.8450708,41.6252417 L31.0861875,45.384125 C27.8637375,48.606575 22.6392875,48.606575 19.4168375,45.384125 C16.1943875,42.161675 16.1943875,36.937225 19.4168375,33.714775 L24.9403042,28.1887417 Z M33.7131708,19.415875 L29.9542875,23.1747583 C31.5931042,23.0515583 33.2550208,23.2979583 34.8040042,23.9113917 L36.5057042,22.2096917 C38.1830208,20.532375 40.9113875,20.532375 42.5887042,22.2096917 C44.2660208,23.8870083 44.2660208,26.615375 42.5887042,28.2926917 L37.0639542,33.8174417 C35.3815042,35.4998917 32.6492875,35.485775 30.9809542,33.8174417 C30.5921042,33.4285917 30.2571542,32.944775 30.0479708,32.4686583 L27.1656042,35.3497417 C27.4684708,35.809175 27.7828875,36.205725 28.1871375,36.609975 C29.2292042,37.6520417 30.5561708,38.4284583 32.0833375,38.796775 C34.0622375,39.2728917 36.1823042,39.0098083 38.0033542,38.0049583 C38.6681208,37.637925 39.2931042,37.1733583 39.8564875,36.609975 L45.3799542,31.085225 C48.6036875,27.862775 48.6036875,22.638325 45.3812375,19.415875 C42.1587875,16.1947083 36.9356208,16.1947083 33.7131708,19.415875 Z" id="Shape-Copy"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n  <div class="flex-item-middle m-l-16">\n    <p class="text-label-small" translate>Connection status</p>\n    <h4 class="m-t-4 m-b-8" [ngClass]="{ \'text-muted\': icon === \'unknown\' }">{{ statusName | translate }}</h4>\n    <p><strong>{{ baseUrl }}</strong></p>\n  </div>\n</div>\n'})],r)}(),A=[{path:"connectivitySettings/impact_provider_settings",component:E,canActivate:[O]}],M=function(){function t(){}return t=f([e.NgModule({declarations:[E,P],exports:[E],imports:[n.CoreModule,n.CommonModule,n.FormsModule,i.RouterModule.forChild(A),c.PopoverModule,s.ReactiveFormsModule],entryComponents:[E],providers:[x,O,w,{provide:n.HOOK_NAVIGATOR_NODES,useClass:I,multi:!0},{provide:n.HOOK_TABS,useClass:w,multi:!0}]})],t)}(),T=function(){function t(t){this.applicationService=t}var n;return n=t,t.prototype.canActivate=function(t,e){return void 0===this.showSigfoxProvider&&(this.showSigfoxProvider=this.applicationService.isAvailable(n.applicationName).then((function(t){return t&&t.data}))),this.showSigfoxProvider},t.applicationName="sigfox-agent",t.ctorParameters=function(){return[{type:a.ApplicationService}]},t=n=f([e.Injectable()],t)}(),_=function(t){function r(e,r){var o=t.call(this,e,r)||this;return o.router=e,o.guard=r,o.tabConfig={label:n.gettext("Sigfox provider settings"),path:"/connectivitySettings/sigfox_provider_settings",icon:"c8y-device"},o}return p(r,t),r.prototype.config=function(){return this.tabConfig},r.ctorParameters=function(){return[{type:i.Router},{type:T}]},r=f([e.Injectable()],r)}(m),k=function(t){function n(e){var n=t.call(this,e)||this;return n.tabFactory=e,n}return p(n,t),n.ctorParameters=function(){return[{type:_}]},n=f([e.Injectable()],n)}(C),D=function(){function t(){}return t=f([e.NgModule({providers:[T,_,{provide:n.HOOK_NAVIGATOR_NODES,useClass:k,multi:!0},{provide:n.HOOK_TABS,useClass:_,multi:!0}]})],t)}(),R=[{path:"connectivitySettings",component:n.ConditionalTabsOutletComponent}],j=function(){function t(){}return t=f([e.NgModule({imports:[n.CoreModule,N,M,D,i.RouterModule.forChild(R)]})],t)}(),F=function(){function t(t,e){this.permissions=t,this.applicationService=e}var r;return r=t,t.prototype.canActivate=function(t,e){var n=this;if(void 0===this.showSimProvider){var o=Promise.resolve(this.permissions.hasRole("ROLE_CONNECTIVITY_READ"));this.showSimProvider=o.then((function(t){return t&&n.applicationService.isAvailable(r.applicationName).then((function(t){return t&&t.data}))}))}return this.showSimProvider},t.applicationName="connectivity",t.ctorParameters=function(){return[{type:n.Permissions},{type:a.ApplicationService}]},t=r=f([e.Injectable()],t)}();function U(t,e){return h(this,void 0,void 0,(function(){var n,r,o,i,a,s,c,u,p,f,h,y,m,C,b,S,L,N,x,O;return v(this,(function(v){switch(v.label){case 0:n=d({},t),r=(l.get(e,"[0].fieldGroup")||[]).filter((function(t){return"file"===t.type&&"base64"===t.templateOptions.contentEncoding})),v.label=1;case 1:v.trys.push([1,15,16,17]),o=g(r),i=o.next(),v.label=2;case 2:return i.done?[3,14]:(a=i.value,(s=t[a.key])&&s.length?1!==a.templateOptions.maxAllowedFiles?[3,4]:(c=n,u=a.key,[4,s[0].readAsDataURL()]):[3,13]);case 3:return c[u]=v.sent().replace(/data:\S+;base64,/gi,""),[3,13];case 4:p=[],v.label=5;case 5:v.trys.push([5,10,11,12]),x=void 0,f=g(s),h=f.next(),v.label=6;case 6:return h.done?[3,9]:(y=h.value,C=(m=p).push,[4,y.readAsDataURL()]);case 7:C.apply(m,[v.sent().replace(/data:\w+\/\w+;base64,/gi,"")]),v.label=8;case 8:return h=f.next(),[3,6];case 9:return[3,12];case 10:return b=v.sent(),x={error:b},[3,12];case 11:try{h&&!h.done&&(O=f.return)&&O.call(f)}finally{if(x)throw x.error}return[7];case 12:n[a.key]=p,v.label=13;case 13:return i=o.next(),[3,2];case 14:return[3,17];case 15:return S=v.sent(),L={error:S},[3,17];case 16:try{i&&!i.done&&(N=o.return)&&N.call(o)}finally{if(L)throw L.error}return[7];case 17:return[2,n]}}))}))}var G=function(){function t(){}return t=f([e.NgModule({providers:[F],imports:[n.ProviderConfigurationModule.config([{navigation:{label:n.gettext("Connectivity"),path:"connectivitySettings",icon:"plug",parent:n.gettext("Settings"),priority:1e3,preventDuplicates:!0},tab:{path:"sim_provider_settings",label:"SIM provider settings",icon:"mobile",canActivate:[F]},layout:{pageTitle:n.gettext("Connectivity"),cardTitle:n.gettext("Settings"),description:n.gettext("In order to see the 'Connectivity' tab in device details, the user needs to have 'Read' permission for 'Connectivity'. To change SIM card status and send text messages, the user needs to have 'Admin' permission for 'Connectivity'."),providerName:n.gettext("Provider"),providerNamePlaceholder:n.gettext("Select or type to filter providers"),providerNameNoMatchesHint:n.gettext("Select one of the existing providers."),deleteRoles:["ROLE_CONNECTIVITY_ADMIN"],deleteBtnLabel:n.gettext("Delete"),saveRoles:["ROLE_CONNECTIVITY_ADMIN"],saveBtnLabel:n.gettext("Save"),beforeSaveHook:U,configurationUpdatedSuccessMsg:n.gettext("Settings updated."),deleteConfigurationModalTitle:n.gettext("Delete settings"),deleteConfigurationModalBody:n.gettext("You are about to delete SIM provider settings. Do you want to proceed?"),deleteConfigurationModalOkBtnLabel:n.gettext("Delete"),configurationDeletedSuccessMsg:n.gettext("Settings deleted.")},endpoint:{definitionsEndpoint:{baseUrl:"service/connectivity/metadata",listUrl:"definitions"},configurationEndpoint:{baseUrl:"service/connectivity/metadata",listUrl:"sim/provider"}}}])]})],t)}();t.AbstractConnectivityNodeFactory=C,t.AbstractConnectivityTabFactory=m,t.ActilityGuard=b,t.ActilityModule=N,t.ActilityNodeFactory=L,t.ActilityTabFactory=S,t.ConnectivityModule=j,t.ImpactConnectivityService=x,t.ImpactGuard=O,t.ImpactModule=M,t.ImpactNodeFactory=I,t.ImpactProviderSettingsComponent=E,t.ImpactTabFactory=w,t.SigfoxGuard=T,t.SigfoxModule=D,t.SigfoxNodeFactory=k,t.SigfoxTabFactory=_,t.SimGuard=F,t.SimModule=G,t.StatusDisplayComponent=P,t.encodeFiles=U,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=c8y-ngx-components-connectivity.umd.min.js.map