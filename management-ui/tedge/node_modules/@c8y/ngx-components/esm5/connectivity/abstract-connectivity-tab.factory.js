import { from, isObservable, of } from 'rxjs';
import { map } from 'rxjs/operators';
var AbstractConnectivityTabFactory = /** @class */ (function () {
    function AbstractConnectivityTabFactory(router, guard) {
        this.router = router;
        this.guard = guard;
    }
    AbstractConnectivityTabFactory.prototype.get = function () {
        return this.router.url.match(/connectivitySettings/g) ? this.tab() : [];
    };
    AbstractConnectivityTabFactory.prototype.tab = function () {
        var _this = this;
        return this.wrapIntoObservable(this.guard.canActivate(this.router.routerState.snapshot.root, this.router.routerState.snapshot)).pipe(map(function (canActivate) { return (canActivate ? _this.config() : null); }));
    };
    AbstractConnectivityTabFactory.prototype.isPromise = function (obj) {
        return !!obj && typeof obj.then === 'function';
    };
    AbstractConnectivityTabFactory.prototype.wrapIntoObservable = function (value) {
        if (isObservable(value)) {
            return value;
        }
        if (this.isPromise(value)) {
            return from(value);
        }
        return of(value);
    };
    return AbstractConnectivityTabFactory;
}());
export { AbstractConnectivityTabFactory };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWJzdHJhY3QtY29ubmVjdGl2aXR5LXRhYi5mYWN0b3J5LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGM4eS9uZ3gtY29tcG9uZW50cy9jb25uZWN0aXZpdHkvIiwic291cmNlcyI6WyJhYnN0cmFjdC1jb25uZWN0aXZpdHktdGFiLmZhY3RvcnkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLElBQUksRUFBRSxZQUFZLEVBQWMsRUFBRSxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzFELE9BQU8sRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVyQztJQUNFLHdDQUFzQixNQUFjLEVBQVksS0FBa0I7UUFBNUMsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUFZLFVBQUssR0FBTCxLQUFLLENBQWE7SUFBRyxDQUFDO0lBRXRFLDRDQUFHLEdBQUg7UUFDRSxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUMxRSxDQUFDO0lBRUQsNENBQUcsR0FBSDtRQUFBLGlCQU9DO1FBTkMsT0FBTyxJQUFJLENBQUMsa0JBQWtCLENBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsV0FBVyxDQUNwQixJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUNyQyxJQUFJLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQ2pDLENBQ0YsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLFVBQUEsV0FBVyxJQUFJLE9BQUEsQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLEtBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQXBDLENBQW9DLENBQUMsQ0FBQyxDQUFDO0lBQ25FLENBQUM7SUFJTyxrREFBUyxHQUFqQixVQUEyQixHQUFRO1FBQ2pDLE9BQU8sQ0FBQyxDQUFDLEdBQUcsSUFBSSxPQUFPLEdBQUcsQ0FBQyxJQUFJLEtBQUssVUFBVSxDQUFDO0lBQ2pELENBQUM7SUFFTywyREFBa0IsR0FBMUIsVUFBOEIsS0FBcUM7UUFDakUsSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLEVBQUU7WUFDdkIsT0FBTyxLQUFLLENBQUM7U0FDZDtRQUVELElBQUksSUFBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsRUFBRTtZQUN6QixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztTQUNwQjtRQUVELE9BQU8sRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ25CLENBQUM7SUFDSCxxQ0FBQztBQUFELENBQUMsQUFqQ0QsSUFpQ0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDYW5BY3RpdmF0ZSwgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IFRhYiwgVGFiRmFjdG9yeSB9IGZyb20gJ0BjOHkvbmd4LWNvbXBvbmVudHMnO1xuaW1wb3J0IHsgZnJvbSwgaXNPYnNlcnZhYmxlLCBPYnNlcnZhYmxlLCBvZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwIH0gZnJvbSAncnhqcy9vcGVyYXRvcnMnO1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RDb25uZWN0aXZpdHlUYWJGYWN0b3J5IGltcGxlbWVudHMgVGFiRmFjdG9yeSB7XG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCByb3V0ZXI6IFJvdXRlciwgcHJvdGVjdGVkIGd1YXJkOiBDYW5BY3RpdmF0ZSkge31cblxuICBnZXQoKSB7XG4gICAgcmV0dXJuIHRoaXMucm91dGVyLnVybC5tYXRjaCgvY29ubmVjdGl2aXR5U2V0dGluZ3MvZykgPyB0aGlzLnRhYigpIDogW107XG4gIH1cblxuICB0YWIoKTogVGFiIHwgT2JzZXJ2YWJsZTxUYWI+IHtcbiAgICByZXR1cm4gdGhpcy53cmFwSW50b09ic2VydmFibGUoXG4gICAgICB0aGlzLmd1YXJkLmNhbkFjdGl2YXRlKFxuICAgICAgICB0aGlzLnJvdXRlci5yb3V0ZXJTdGF0ZS5zbmFwc2hvdC5yb290LFxuICAgICAgICB0aGlzLnJvdXRlci5yb3V0ZXJTdGF0ZS5zbmFwc2hvdFxuICAgICAgKVxuICAgICkucGlwZShtYXAoY2FuQWN0aXZhdGUgPT4gKGNhbkFjdGl2YXRlID8gdGhpcy5jb25maWcoKSA6IG51bGwpKSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgY29uZmlnKCk6IFRhYjtcblxuICBwcml2YXRlIGlzUHJvbWlzZTxUID0gYW55PihvYmo6IGFueSk6IG9iaiBpcyBQcm9taXNlPFQ+IHtcbiAgICByZXR1cm4gISFvYmogJiYgdHlwZW9mIG9iai50aGVuID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgcHJpdmF0ZSB3cmFwSW50b09ic2VydmFibGU8VD4odmFsdWU6IFQgfCBQcm9taXNlPFQ+IHwgT2JzZXJ2YWJsZTxUPik6IE9ic2VydmFibGU8VD4ge1xuICAgIGlmIChpc09ic2VydmFibGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaXNQcm9taXNlKHZhbHVlKSkge1xuICAgICAgcmV0dXJuIGZyb20odmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBvZih2YWx1ZSk7XG4gIH1cbn1cbiJdfQ==