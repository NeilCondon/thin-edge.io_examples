import * as tslib_1 from "tslib";
import { Component, Input, Output, EventEmitter, HostListener } from '@angular/core';
import { Pagination, AlertService, gettext, ActionControl, Row } from '@c8y/ngx-components';
import { QueriesUtil } from '@c8y/client';
import { AssignDevicesService } from './assign-devices.service';
var AssignDevicesComponent = /** @class */ (function () {
    function AssignDevicesComponent(assignDevicesService, alert) {
        this.assignDevicesService = assignDevicesService;
        this.alert = alert;
        this.refresh = new EventEmitter();
        this.onCancel = new EventEmitter();
        this.onShowChildDevices = new EventEmitter();
        this.selectedDevice = new EventEmitter();
        this.pendingStatus = false;
        this.pagination = { pageSize: 20, currentPage: 1 };
        this.selected = [];
        this.canAssignDevice = false;
        this.actionControls = [];
        this.isSelectable = true;
        this.itemsSelectLimit = 15;
        this.queriesUtil = new QueriesUtil();
    }
    AssignDevicesComponent.prototype.onEnterKeyDown = function (event) {
        if (this.selected.length > 0) {
            this.assignDevices();
        }
    };
    AssignDevicesComponent.prototype.onEscapeKeyDown = function (event) {
        this.onCancel.emit();
    };
    AssignDevicesComponent.prototype.ngOnInit = function () {
        this.setNotIncludedInGroupQuery();
    };
    AssignDevicesComponent.prototype.setNotIncludedInGroupQuery = function () {
        var notIncludedInGroupQuery = { __not: { __bygroupid: this.currentGroupId } };
        this.baseQuery = notIncludedInGroupQuery;
    };
    AssignDevicesComponent.prototype.setActionControls = function (showChildren) {
        var _this = this;
        var actionControls = [];
        var selectChildrenAction = {
            type: 'SELECT_CHILDREN',
            icon: 'enter-bottom',
            text: gettext('Select children'),
            callback: function (asset) { return _this.selectChildren(asset); },
            showIf: function (asset) {
                return asset.childDevices.references.length > 0;
            }
        };
        if (showChildren) {
            actionControls.push(selectChildrenAction);
        }
        this.actionControls = actionControls;
        this.refresh.emit();
    };
    AssignDevicesComponent.prototype.assignDevices = function () {
        return tslib_1.__awaiter(this, void 0, void 0, function () {
            return tslib_1.__generator(this, function (_a) {
                switch (_a.label) {
                    case 0:
                        this.pendingStatus = true;
                        return [4 /*yield*/, this.assignDevicesService.assignDevices(this.currentGroupId, this.selected)];
                    case 1:
                        _a.sent();
                        this.pendingStatus = false;
                        this.selected = [];
                        this.onCancel.emit();
                        this.refresh.emit();
                        this.alert.success(gettext('Devices assigned to the group.'));
                        return [2 /*return*/];
                }
            });
        });
    };
    AssignDevicesComponent.prototype.onSelected = function (selectedDevicesIDs) {
        this.selected = selectedDevicesIDs;
    };
    AssignDevicesComponent.prototype.selectChildren = function (asset) {
        this.onShowChildDevices.emit(true);
        this.selectedDevice.emit(asset);
    };
    AssignDevicesComponent.ctorParameters = function () { return [
        { type: AssignDevicesService },
        { type: AlertService }
    ]; };
    tslib_1.__decorate([
        Input()
    ], AssignDevicesComponent.prototype, "currentGroupId", void 0);
    tslib_1.__decorate([
        Input()
    ], AssignDevicesComponent.prototype, "refresh", void 0);
    tslib_1.__decorate([
        Output()
    ], AssignDevicesComponent.prototype, "onCancel", void 0);
    tslib_1.__decorate([
        Output()
    ], AssignDevicesComponent.prototype, "onShowChildDevices", void 0);
    tslib_1.__decorate([
        Output()
    ], AssignDevicesComponent.prototype, "selectedDevice", void 0);
    tslib_1.__decorate([
        HostListener('document:keydown.enter', ['$event'])
    ], AssignDevicesComponent.prototype, "onEnterKeyDown", null);
    tslib_1.__decorate([
        HostListener('document:keydown.escape', ['$event'])
    ], AssignDevicesComponent.prototype, "onEscapeKeyDown", null);
    AssignDevicesComponent = tslib_1.__decorate([
        Component({
            selector: 'c8y-assign-devices',
            template: "<div class=\"card-block flex-no-shrink separator-bottom col-xs-12 large-padding p-t-24 p-b-24\">\n  <div class=\"row\">\n    <div class=\"col-md-6 col-md-offset-3 col-lg-4 col-lg-offset-4\">\n      <h4 class=\"text-center text-medium\">\n        {{ 'Assign devices' | translate }}\n      </h4>\n    </div>\n  </div>\n</div>\n<c8y-device-grid\n  [title]=\"'Select target devices' | translate\"\n  [actionControls]=\"actionControls\"\n  [infiniteScroll]=\"'auto'\"\n  [selectable]=\"isSelectable\"\n  [pagination]=\"pagination\"\n  (itemsSelect)=\"onSelected($event)\"\n  [itemsSelectLimit]=\"itemsSelectLimit\"\n  [refresh]=\"refresh\"\n  [baseQuery]=\"baseQuery\"\n  (onChildDevices)=\"setActionControls($event)\"\n  [showChildDevices]=\"{ show: true, value: false }\"\n  class=\"flex-grow col-xs-12 no-gutter\"\n>\n  <div class=\"c8y-empty-state\">\n    <h1 c8yIcon=\"search\"></h1>\n    <div>\n      <p>\n        <strong>{{ 'No matching devices.' | translate }}</strong>\n      </p>\n      <small>{{ 'Refine your search terms' | translate }}</small>\n    </div>\n  </div>\n</c8y-device-grid>\n\n<div class=\"text-center card-footer p-24 separator\">\n  <button (click)=\"onCancel.emit()\" type=\"button\" class=\"btn btn-default\" title=\"{{'Cancel' | translate}}\">\n    <span>{{ 'Cancel' | translate }}</span>\n  </button>\n  <button\n    (click)=\"assignDevices()\"\n    type=\"button\"\n    class=\"btn btn-primary\"\n    [ngClass]=\"{ 'btn-pending': pendingStatus }\"\n    title=\"{{'Assign' | translate}}\"\n    [disabled]=\"selected.length === 0\"\n  >\n    <span>{{ 'Assign' | translate }}</span>\n  </button>\n</div>\n"
        })
    ], AssignDevicesComponent);
    return AssignDevicesComponent;
}());
export { AssignDevicesComponent };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXNzaWduLWRldmljZXMuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6Im5nOi8vQGM4eS9uZ3gtY29tcG9uZW50cy9zdWItYXNzZXRzLyIsInNvdXJjZXMiOlsiYXNzaWduLWRldmljZXMvYXNzaWduLWRldmljZXMuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsWUFBWSxFQUFFLFlBQVksRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUNyRixPQUFPLEVBQUUsVUFBVSxFQUFFLFlBQVksRUFBRSxPQUFPLEVBQUUsYUFBYSxFQUFFLEdBQUcsRUFBRSxNQUFNLHFCQUFxQixDQUFDO0FBSTVGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxhQUFhLENBQUM7QUFDMUMsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFNaEU7SUFrQkUsZ0NBQW9CLG9CQUEwQyxFQUFVLEtBQW1CO1FBQXZFLHlCQUFvQixHQUFwQixvQkFBb0IsQ0FBc0I7UUFBVSxVQUFLLEdBQUwsS0FBSyxDQUFjO1FBaEJsRixZQUFPLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNqQyxhQUFRLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUNuQyx1QkFBa0IsR0FBRyxJQUFJLFlBQVksRUFBVyxDQUFDO1FBQ2pELG1CQUFjLEdBQUcsSUFBSSxZQUFZLEVBQWtCLENBQUM7UUFHOUQsa0JBQWEsR0FBWSxLQUFLLENBQUM7UUFDL0IsZUFBVSxHQUFlLEVBQUUsUUFBUSxFQUFFLEVBQUUsRUFBRSxXQUFXLEVBQUUsQ0FBQyxFQUFFLENBQUM7UUFDMUQsYUFBUSxHQUFhLEVBQUUsQ0FBQztRQUV4QixvQkFBZSxHQUFZLEtBQUssQ0FBQztRQUNqQyxtQkFBYyxHQUFvQixFQUFFLENBQUM7UUFDNUIsaUJBQVksR0FBRyxJQUFJLENBQUM7UUFDcEIscUJBQWdCLEdBQUcsRUFBRSxD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LFlBQVksQ0FBQyx3QkFBd0IsRUFBRSxDQUFDLFFBQVEsQ0FBQyxDQUFDO2dFQUlsRDtJQUVvRDtRQUFwRCxZQUFZLENBQUMseUJBQXlCLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQztpRUFFbkQ7SUE5QlUsc0JBQXNCO1FBSmxDLFNBQVMsQ0FBQztZQUNULFFBQVEsRUFBRSxvQkFBb0I7WUFDOUIseW1EQUE4QztTQUMvQyxDQUFDO09BQ1csc0JBQXNCLENBK0VsQztJQUFELDZCQUFDO0NBQUEsQUEvRUQsSUErRUM7U0EvRVksc0JBQXNCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCwgT3V0cHV0LCBFdmVudEVtaXR0ZXIsIEhvc3RMaXN0ZW5lciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUGFnaW5hdGlvbiwgQWxlcnRTZXJ2aWNlLCBnZXR0ZXh0LCBBY3Rpb25Db250cm9sLCBSb3cgfSBmcm9tICdAYzh5L25neC1jb21wb25lbnRzJztcbmltcG9ydCB7IEludmVudG9yeVNlcnZpY2UgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBTdWJBc3NldHNTZXJ2aWNlIH0gZnJvbSAnLi4vc3ViLWFzc2V0cy5zZXJ2aWNlJztcbmltcG9ydCB7IElNYW5hZ2VkT2JqZWN0IH0gZnJvbSAnQGM4eS9jbGllbnQnO1xuaW1wb3J0IHsgUXVlcmllc1V0aWwgfSBmcm9tICdAYzh5L2NsaWVudCc7XG5pbXBvcnQgeyBBc3NpZ25EZXZpY2VzU2VydmljZSB9IGZyb20gJy4vYXNzaWduLWRldmljZXMuc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2M4eS1hc3NpZ24tZGV2aWNlcycsXG4gIHRlbXBsYXRlVXJsOiAnLi9hc3NpZ24tZGV2aWNlcy5jb21wb25lbnQuaHRtbCdcbn0pXG5leHBvcnQgY2xhc3MgQXNzaWduRGV2aWNlc0NvbXBvbmVudCB7XG4gIEBJbnB1dCgpIGN1cnJlbnRHcm91cElkOiBzdHJpbmc7XG4gIEBJbnB1dCgpIHJlZnJlc2ggPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIG9uQ2FuY2VsID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG4gIEBPdXRwdXQoKSBvblNob3dDaGlsZERldmljZXMgPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG4gIEBPdXRwdXQoKSBzZWxlY3RlZERldmljZSA9IG5ldyBFdmVudEVtaXR0ZXI8SU1hbmFnZWRPYmplY3Q+KCk7XG5cbiAgZGV2aWNlUXVlcnlTdHJpbmdPdXRwdXQ6IHN0cmluZztcbiAgcGVuZGluZ1N0YXR1czogYm9vbGVhbiA9IGZhbHNlO1xuICBwYWdpbmF0aW9uOiBQYWdpbmF0aW9uID0geyBwYWdlU2l6ZTogMjAsIGN1cnJlbnRQYWdlOiAxIH07XG4gIHNlbGVjdGVkOiBzdHJpbmdbXSA9IFtdO1xuICBiYXNlUXVlcnk6IGFueTtcbiAgY2FuQXNzaWduRGV2aWNlOiBib29sZWFuID0gZmFsc2U7XG4gIGFjdGlvbkNvbnRyb2xzOiBBY3Rpb25Db250cm9sW10gPSBbXTtcbiAgcmVhZG9ubHkgaXNTZWxlY3RhYmxlID0gdHJ1ZTtcbiAgcmVhZG9ubHkgaXRlbXNTZWxlY3RMaW1pdCA9IDE1O1xuICBwcml2YXRlIHF1ZXJpZXNVdGlsOiBRdWVyaWVzVXRpbDtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFzc2lnbkRldmljZXNTZXJ2aWNlOiBBc3NpZ25EZXZpY2VzU2VydmljZSwgcHJpdmF0ZSBhbGVydDogQWxlcnRTZXJ2aWNlKSB7XG4gICAgdGhpcy5xdWVyaWVzVXRpbCA9IG5ldyBRdWVyaWVzVXRpbCgpO1xuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6a2V5ZG93bi5lbnRlcicsIFsnJGV2ZW50J10pIG9uRW50ZXJLZXlEb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG4gICAgaWYgKHRoaXMuc2VsZWN0ZWQubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hc3NpZ25EZXZpY2VzKCk7XG4gICAgfVxuICB9XG5cbiAgQEhvc3RMaXN0ZW5lcignZG9jdW1lbnQ6a2V5ZG93bi5lc2NhcGUnLCBbJyRldmVudCddKSBvbkVzY2FwZUtleURvd24oZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHtcbiAgICB0aGlzLm9uQ2FuY2VsLmVtaXQoKTtcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuc2V0Tm90SW5jbHVkZWRJbkdyb3VwUXVlcnkoKTtcbiAgfVxuXG4gIHNldE5vdEluY2x1ZGVkSW5Hcm91cFF1ZXJ5KCkge1xuICAgIGNvbnN0IG5vdEluY2x1ZGVkSW5Hcm91cFF1ZXJ5ID0geyBfX25vdDogeyBfX2J5Z3JvdXBpZDogdGhpcy5jdXJyZW50R3JvdXBJZCB9IH07XG4gICAgdGhpcy5iYXNlUXVlcnkgPSBub3RJbmNsdWRlZEluR3JvdXBRdWVyeTtcbiAgfVxuXG4gIHNldEFjdGlvbkNvbnRyb2xzKHNob3dDaGlsZHJlbjogYm9vbGVhbikge1xuICAgIGNvbnN0IGFjdGlvbkNvbnRyb2xzOiBBY3Rpb25Db250cm9sW10gPSBbXTtcbiAgICBjb25zdCBzZWxlY3RDaGlsZHJlbkFjdGlvbjogQWN0aW9uQ29udHJvbCA9IHtcbiAgICAgIHR5cGU6ICdTRUxFQ1RfQ0hJTERSRU4nLFxuICAgICAgaWNvbjogJ2VudGVyLWJvdHRvbScsXG4gICAgICB0ZXh0OiBnZXR0ZXh0KCdTZWxlY3QgY2hpbGRyZW4nKSxcbiAgICAgIGNhbGxiYWNrOiAoYXNzZXQ6IFJvdykgPT4gdGhpcy5zZWxlY3RDaGlsZHJlbihhc3NldCBhcyBJTWFuYWdlZE9iamVjdCksXG4gICAgICBzaG93SWY6IChhc3NldDogUm93KSA9PlxuICAgICAgICBhc3NldC5jaGlsZERldmljZXMucmVmZXJlbmNlcy5sZW5ndGggPiAwXG4gICAgfTtcblxuICAgIGlmIChzaG93Q2hpbGRyZW4pIHtcbiAgICAgIGFjdGlvbkNvbnRyb2xzLnB1c2goc2VsZWN0Q2hpbGRyZW5BY3Rpb24pO1xuICAgIH1cbiAgICB0aGlzLmFjdGlvbkNvbnRyb2xzID0gYWN0aW9uQ29udHJvbHM7XG4gICAgdGhpcy5yZWZyZXNoLmVtaXQoKTtcbiAgfVxuXG4gIGFzeW5jIGFzc2lnbkRldmljZXMoKSB7XG4gICAgdGhpcy5wZW5kaW5nU3RhdHVzID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLmFzc2lnbkRldmljZXNTZXJ2aWNlLmFzc2lnbkRldmljZXModGhpcy5jdXJyZW50R3JvdXBJZCwgdGhpcy5zZWxlY3RlZCk7XG4gICAgdGhpcy5wZW5kaW5nU3RhdHVzID0gZmFsc2U7XG4gICAgdGhpcy5zZWxlY3RlZCA9IFtdO1xuXG4gICAgdGhpcy5vbkNhbmNlbC5lbWl0KCk7XG4gICAgdGhpcy5yZWZyZXNoLmVtaXQoKTtcblxuICAgIHRoaXMuYWxlcnQuc3VjY2VzcyhnZXR0ZXh0KCdEZXZpY2VzIGFzc2lnbmVkIHRvIHRoZSBncm91cC4nKSk7XG4gIH1cblxuICBvblNlbGVjdGVkKHNlbGVjdGVkRGV2aWNlc0lEczogc3RyaW5nW10pIHtcbiAgICB0aGlzLnNlbGVjdGVkID0gc2VsZWN0ZWREZXZpY2VzSURzO1xuICB9XG5cbiAgc2VsZWN0Q2hpbGRyZW4oYXNzZXQ6IElNYW5hZ2VkT2JqZWN0KSB7XG4gICAgdGhpcy5vblNob3dDaGlsZERldmljZXMuZW1pdCh0cnVlKTtcbiAgICB0aGlzLnNlbGVjdGVkRGV2aWNlLmVtaXQoYXNzZXQpO1xuICB9XG59XG4iXX0=