{"version":3,"file":"c8y-ngx-components-sub-assets.js","sources":["ng://@c8y/ngx-components/sub-assets/columns/asset-type.cell-renderer.component.ts","ng://@c8y/ngx-components/sub-assets/columns/asset-type-grid-column.ts","ng://@c8y/ngx-components/sub-assets/sub-assets.service.ts","ng://@c8y/ngx-components/sub-assets/group-info.component.ts","ng://@c8y/ngx-components/sub-assets/sub-assets.component.ts","ng://@c8y/ngx-components/sub-assets/delete-assets-modal/delete-assets-modal.component.ts","ng://@c8y/ngx-components/sub-assets/unassign-assets-modal/unassign-modal.component.ts","ng://@c8y/ngx-components/sub-assets/sub-assets-grid.component.ts","ng://@c8y/ngx-components/sub-assets/add-group/add-group.service.ts","ng://@c8y/ngx-components/sub-assets/add-group/add-group.component.ts","ng://@c8y/ngx-components/sub-assets/add-group/add-group.module.ts","ng://@c8y/ngx-components/sub-assets/groups.component.ts","ng://@c8y/ngx-components/sub-assets/assign-devices/assign-devices.service.ts","ng://@c8y/ngx-components/sub-assets/assign-devices/assign-devices.component.ts","ng://@c8y/ngx-components/sub-assets/assign-devices/assign-child-devices.component.ts","ng://@c8y/ngx-components/sub-assets/sub-assets.module.ts","ng://@c8y/ngx-components/sub-assets/c8y-ngx-components-sub-assets.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { CellRendererContext, gettext } from '@c8y/ngx-components';\nimport { DeviceGroupService } from '@c8y/ngx-components/assets-navigator';\n\n@Component({\n  templateUrl: './asset-type.cell-renderer.component.html'\n})\nexport class AssetTypeCellRendererComponent implements OnInit {\n  groupIcon: string;\n  isAnyGroup: boolean;\n  isDevice: boolean;\n  iconTitle: string;\n  constructor(\n    public context: CellRendererContext,\n    private deviceGroupService: DeviceGroupService\n  ) {}\n\n  ngOnInit() {\n    this.isAnyGroup = this.deviceGroupService.isAnyGroup(this.context.item);\n    this.isDevice = this.deviceGroupService.isDevice(this.context.item);\n    this.groupIcon = this.deviceGroupService.icon(this.context.item);\n    this.iconTitle = this.getIconTitle(this.groupIcon);\n  }\n\n  private getIconTitle(icon: string) {\n    switch (icon) {\n      case 'c8y-group':\n        return gettext('Group');\n      case 'c8y-group-smart':\n        return gettext('Smart group');\n      case 'c8y-group-remote-inactive':\n        return 'Inactive remote group';\n      case 'c8y-group-remote':\n        return gettext('Remote group');\n      default:\n        return gettext('Child device');\n    }\n  }\n}\n","import { gettext, ColumnDataType, ColumnConfig } from '@c8y/ngx-components';\nimport { AssetTypeCellRendererComponent } from './asset-type.cell-renderer.component';\nimport { BaseDeviceGridColumn } from '@c8y/ngx-components/device-grid';\n\nexport class AssetTypeGridColumn extends BaseDeviceGridColumn {\n  constructor(initialColumnConfig?: ColumnConfig) {\n    super(initialColumnConfig);\n    this.name = 'type';\n    this.header = gettext('Type');\n    this.dataType = ColumnDataType.Icon;\n    this.cellRendererComponent = AssetTypeCellRendererComponent;\n    this.sortable = true;\n    this.sortingConfig = {\n      pathSortingConfigs: [{ path: `c8y_IsDeviceGroup` }]\n    };\n  }\n}\n","import { Injectable } from '@angular/core';\nimport {\n  IManagedObject,\n  InventoryService,\n  IRule,\n  QueriesUtil,\n  SmartGroupsService,\n  SmartRulesService,\n  UserService\n} from '@c8y/client';\nimport {\n  ActionControl,\n  AlertService,\n  AppStateService,\n  BulkActionControl,\n  gettext,\n  Pagination,\n  Permissions\n} from '@c8y/ngx-components';\nimport { AssetNodeService, DeviceGroupService } from '@c8y/ngx-components/assets-navigator';\nimport {\n  AlarmsDeviceGridColumn,\n  DeviceGridColumn,\n  DeviceGridService,\n  ImeiDeviceGridColumn,\n  ModelDeviceGridColumn,\n  NameDeviceGridColumn,\n  RegistrationDateDeviceGridColumn,\n  SerialNumberDeviceGridColumn,\n  SystemIdDeviceGridColumn\n} from '@c8y/ngx-components/device-grid';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BehaviorSubject } from 'rxjs';\nimport { AssetTypeGridColumn } from './columns/asset-type-grid-column';\n\n@Injectable()\nexport class SubAssetsService extends DeviceGridService {\n  queriesUtil: QueriesUtil;\n  uiOnlyCountersUpdate = new BehaviorSubject(null);\n  protected GRID_CONFIG_DEFAULT_STORAGE_KEY = 'sub-assets-grid-config';\n  private IS_DEVICE_GROUP_FRAGMENT = 'c8y_IsDeviceGroup';\n  private IS_DYNAMIC_GROUP_FRAGMENT = 'c8y_IsDynamicGroup';\n\n  constructor(\n    protected translateService: TranslateService,\n    protected inventoryService: InventoryService,\n    protected appState: AppStateService,\n    protected user: UserService,\n    protected assetNodeService: AssetNodeService,\n    protected deviceGroupService: DeviceGroupService,\n    protected smartGroupsService: SmartGroupsService,\n    protected smartRulesService: SmartRulesService,\n    protected alertService: AlertService,\n    protected permissionsService: Permissions\n  ) {\n    super(inventoryService, translateService);\n  }\n\n  getDefaultColumns(filterable: boolean = true, sortable: boolean = true): DeviceGridColumn[] {\n    const defaultColumns = [\n      new AssetTypeGridColumn({ sortOrder: 'desc' }),\n      new NameDeviceGridColumn({ sortOrder: 'asc' }),\n      new ModelDeviceGridColumn(),\n      new SerialNumberDeviceGridColumn({ visible: false }),\n      new RegistrationDateDeviceGridColumn({ visible: false }),\n      new SystemIdDeviceGridColumn({ visible: false }),\n      new ImeiDeviceGridColumn({ visible: false }),\n      new AlarmsDeviceGridColumn()\n    ];\n    return defaultColumns;\n  }\n\n  getDefaultPagination(): Pagination {\n    const { pagination } = this.getConfig();\n    return {\n      pageSize: pagination.pageSize,\n      currentPage: 1\n    };\n  }\n\n  getDefaultActionControls(): ActionControl[] {\n    return [];\n  }\n\n  async unassignAsset(asset: IManagedObject, parentRef: IManagedObject) {\n    const { id: assetId } = asset;\n    const { id: parentId } = parentRef;\n\n    if (this.isDevice(asset)) {\n      try {\n        await this.inventoryService.childAssetsRemove(assetId, parentId);\n        const alertMessage = this.translateService.instant(gettext('Asset unassigned.'));\n        this.alertService.success(alertMessage);\n      } catch (error) {\n        const alertMessage = this.translateService.instant(gettext('Could not unassign devices.'));\n        this.alertService.danger(alertMessage);\n      }\n      await this.deactivateSmartrulesForAsset(asset, parentRef);\n    }\n  }\n\n  isDevice(asset: IManagedObject): boolean {\n    return (\n      !asset.hasOwnProperty(this.IS_DEVICE_GROUP_FRAGMENT) &&\n      !asset.hasOwnProperty(this.IS_DYNAMIC_GROUP_FRAGMENT)\n    );\n  }\n\n  async deleteAsset(asset: IManagedObject, parentRef: IManagedObject, params = {}) {\n    const isGroup =\n      asset.hasOwnProperty(this.IS_DEVICE_GROUP_FRAGMENT) ||\n      this.smartGroupsService.isSmartGroup(asset);\n\n    if (isGroup) {\n      await this.deleteGroup(asset, params);\n    } else {\n      await this.deleteDevice(asset, params);\n    }\n\n    if (\n      parentRef &&\n      !this.smartGroupsService.isSmartGroup(asset) &&\n      !this.smartGroupsService.isSmartGroupV2(asset)\n    ) {\n      await this.deactivateSmartrulesForAsset(asset, parentRef);\n    }\n  }\n\n  shouldShowWithDeviceUserCheckbox(asset: IManagedObject): boolean {\n    const { owner, c8y_IsDevice: isRootDevice } = asset;\n    const hasDeviceUserAsOwner = asset.owner && this.isDeviceUser(owner);\n\n    return Boolean(isRootDevice && hasDeviceUserAsOwner);\n  }\n\n  getDefaultBulkActionControls(): BulkActionControl[] {\n    return [];\n  }\n\n  async getData(\n    columns: DeviceGridColumn[],\n    pagination: Pagination,\n    parentReference: IManagedObject,\n    baseQuery: any = {}\n  ) {\n    const isRoot = !parentReference;\n    if (isRoot) {\n      const query = this.buildCombinedRootQueryFilter(columns, pagination);\n      return this.assetNodeService.getRootNodes({ ...pagination, query });\n    }\n    const filters = {\n      ...this.getAssetsFilters(columns, pagination, baseQuery),\n      withParents: false\n    };\n    if (this.deviceGroupService.isGroup(parentReference)) {\n      return this.assetNodeService.getGroupItems(parentReference.id, filters);\n    }\n    if (this.deviceGroupService.isDynamicGroup(parentReference)) {\n      return this.assetNodeService.getDynamicGroupItems(\n        parentReference.c8y_DeviceQueryString,\n        filters\n      );\n    }\n    if (this.deviceGroupService.isDevice(parentReference)) {\n      return this.assetNodeService.getDeviceChildren(parentReference.id, filters);\n    }\n  }\n\n  async getCount(\n    columns: DeviceGridColumn[],\n    pagination: Pagination,\n    parentReference: IManagedObject,\n    baseQuery: any = {}\n  ): Promise<number> {\n    const defaultFilters = {\n      pageSize: 1,\n      withChildren: false\n    };\n    const filters = !parentReference\n      ? {\n          query: this.buildCombinedRootQueryFilter(columns, pagination),\n          ...defaultFilters\n        }\n      : {\n          ...this.getAssetsFilters(columns, pagination, baseQuery),\n          ...defaultFilters\n        };\n    return this.getAssetsStatistics(parentReference, filters);\n  }\n\n  getTotal(parentReference: IManagedObject, baseQuery: any = {}): Promise<number> {\n    const queryFilter = this.assetNodeService.rootQueryFilter();\n    const query = !parentReference\n      ? this.queriesUtil.addAndFilter(queryFilter, baseQuery)\n      : baseQuery;\n    const filters = {\n      query: this.queriesUtil.buildQuery(query),\n      withChildren: false,\n      withTotalPages: true,\n      pageSize: 1\n    };\n    return this.getAssetsStatistics(parentReference, filters);\n  }\n\n  canEditGroup(group: IManagedObject) {\n    const currentUser = this.appState.currentUser.value;\n    const hasAdminRole = this.user.hasAnyRole(currentUser, ['ROLE_INVENTORY_ADMIN']);\n    const isOwner = group.owner === currentUser.userName;\n    return hasAdminRole || isOwner;\n  }\n\n  canEditSmartGroup(): boolean {\n    const SMART_GROUPS_ROLES_EDIT = ['ROLE_SMARTGROUP_UPDATE', 'ROLE_SMARTGROUP_ADMIN'];\n    return this.permissionsService.hasAnyRole(SMART_GROUPS_ROLES_EDIT);\n  }\n\n  canDeleteSmartGroup(): boolean {\n    const SMART_GROUPS_ROLES_DELETE = ['ROLE_SMARTGROUP_ADMIN', 'ROLE_INVENTORY_ADMIN'];\n    return this.permissionsService.hasAnyRole(SMART_GROUPS_ROLES_DELETE);\n  }\n\n  isSmartGroup(group: IManagedObject): boolean {\n    return this.smartGroupsService.isSmartGroup(group) || this.smartGroupsService.isSmartGroupV2(group);\n  }\n\n  isUsingInventoryRoles() {\n    const currentUser = this.appState.currentUser.value;\n    const hasAnyInventoryRole = this.user.hasAnyRole(currentUser, [\n      'ROLE_INVENTORY_ADMIN',\n      'ROLE_INVENTORY_READ',\n      'ROLE_INVENTORY_CREATE'\n    ]);\n    return !hasAnyInventoryRole;\n  }\n\n  protected async getAssetsStatistics(\n    parentReference: IManagedObject,\n    filters: object\n  ): Promise<number> {\n    const isRoot = !parentReference;\n    if (isRoot) {\n      return (await this.assetNodeService.getRootNodes(filters)).paging.totalPages;\n    }\n    if (this.deviceGroupService.isGroup(parentReference)) {\n      return (await this.assetNodeService.getGroupItems(parentReference.id, filters)).paging\n        .totalPages;\n    }\n    if (this.deviceGroupService.isDynamicGroup(parentReference)) {\n      return (await this.assetNodeService.getDynamicGroupItems(\n        parentReference.c8y_DeviceQueryString,\n        filters\n      )).paging.totalPages;\n    }\n    if (this.deviceGroupService.isDevice(parentReference)) {\n      return (await this.assetNodeService.getDeviceChildren(parentReference.id, filters)).paging\n        .totalPages;\n    }\n  }\n\n  protected buildCombinedRootQueryFilter(columns, pagination) {\n    const queryFilter = this.assetNodeService.rootQueryFilter();\n    const userQuery = this.getQueryObj(columns, pagination);\n\n    const queryPart = this.queriesUtil.addOrderbys(queryFilter, userQuery.__orderby, 'append');\n    const fullQuery = this.queriesUtil.addAndFilter(queryPart, userQuery.__filter);\n    return this.queriesUtil.buildQuery(fullQuery);\n  }\n\n  private async deleteGroup(group: IManagedObject, params: any = {}) {\n    const { cascade } = params;\n\n    try {\n      this.smartGroupsService.isSmartGroup(group) || this.smartGroupsService.isSmartGroupV2(group)\n        ? await this.smartGroupsService.delete(group, { cascade })\n        : await this.inventoryService.delete(group, { cascade });\n\n      const alertMessage = this.translateService.instant(gettext('Asset deleted.'));\n      this.alertService.success(alertMessage);\n    } catch (error) {\n      const alertMessage = this.translateService.instant(gettext('Could not delete asset.'));\n      this.alertService.danger(alertMessage);\n    }\n  }\n\n  private async deleteDevice(device: IManagedObject, params: any = {}) {\n    const { cascade, withDeviceUser } = params;\n    try {\n      const { owner } = device;\n      const shouldRemoveOwner = withDeviceUser && owner && this.isDeviceUser(owner);\n\n      shouldRemoveOwner\n        ? await this.deleteDeviceWithUser(device, cascade)\n        : await this.inventoryService.delete(device, { cascade });\n\n      const alertMessage = this.translateService.instant(gettext('Asset deleted.'));\n      this.alertService.success(alertMessage);\n    } catch (error) {\n      const alertMessage = this.translateService.instant(gettext('Could not delete asset.'));\n      this.alertService.danger(alertMessage);\n    }\n  }\n\n  private async deactivateSmartrulesForAsset(asset: IManagedObject, parentRef: IManagedObject) {\n    const { id: assetId } = asset;\n    const { id: parentId } = parentRef;\n    const rules: IRule[] = (await this.smartRulesService.listByContext(parentId)).data;\n\n    const upateSmartrulesPromises = rules.map(rule =>\n      this.smartRulesService.bulkDeactivateEnabledSources(rule, [assetId])\n    );\n\n    try {\n      await Promise.all(upateSmartrulesPromises);\n    } catch (error) {\n      const alertMessage = this.translateService.instant(\n        gettext('Could not deactivate smart rules.')\n      );\n      this.alertService.danger(alertMessage);\n    }\n  }\n\n  private isDeviceUser(userId: string) {\n    return userId.match(/^device_/);\n  }\n\n  private async deleteDeviceWithUser(device: IManagedObject, cascade: boolean) {\n    const params = { cascade, withDeviceUser: true };\n    try {\n      return await this.inventoryService.delete(device, params);\n    } catch (error) {\n      return await this.inventoryService.delete(device, { cascade });\n    }\n  }\n\n  private getAssetsFilters(columns: DeviceGridColumn[], pagination: Pagination, baseQuery) {\n    const query = this.queriesUtil.addAndFilter(this.getQueryObj(columns), baseQuery);\n    return {\n      query: this.queriesUtil.buildQuery(query),\n      pageSize: pagination.pageSize || this.DEFAULT_PAGE_SIZE,\n      currentPage: pagination.currentPage,\n      withTotalPages: true\n    };\n  }\n}\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { IManagedObject, InventoryService, SmartGroupsService } from '@c8y/client';\nimport { AlertService, gettext, ModalService, Status } from '@c8y/ngx-components';\nimport { DeviceGroupService } from '@c8y/ngx-components/assets-navigator';\nimport { TranslateService } from '@ngx-translate/core';\nimport { SubAssetsService } from './sub-assets.service';\n\n@Component({\n  selector: 'c8y-group-info',\n  templateUrl: './group-info.component.html'\n})\nexport class GroupInfoComponent {\n  @Input() group: IManagedObject;\n  @Output() onGroupChange = new EventEmitter();\n  canEdit: boolean;\n  groupIcon: string;\n  smartGroupFilter: string;\n  filterHintMsg: string;\n\n  private filterMsg = gettext(\n    'Smart groups are groups dynamically constructed based on filtering criteria.'\n  );\n  private canEditMsg = gettext('You can edit the filter here.');\n  private readonly GROUP_UPDATED_MSG = gettext('Group updated.');\n  constructor(\n    private inventory: InventoryService,\n    private subAssetsService: SubAssetsService,\n    private deviceGroupService: DeviceGroupService,\n    private smartGroupsService: SmartGroupsService,\n    private alertService: AlertService,\n    private translate: TranslateService,\n    private modalService: ModalService\n  ) {}\n\n  ngOnInit() {\n    this.canEdit = this.smartGroupsService.isSmartGroupV2(this.group)\n      ? this.subAssetsService.canEditSmartGroup()\n      : this.subAssetsService.canEditGroup(this.group);\n    this.groupIcon = this.deviceGroupService.icon(this.group);\n    this.smartGroupFilter = this.group.c8y_DeviceQueryString;\n\n    this.setHintMsg();\n  }\n\n  isSmartGroup() {\n    return this.subAssetsService.isSmartGroup(this.group);\n  }\n\n  async update(partialGroup: Partial<IManagedObject>) {\n    try {\n      const isSmartGroup: boolean = this.subAssetsService.isSmartGroup(this.group);\n      isSmartGroup\n        ? await this.updateSmartGroup(partialGroup)\n        : await this.updateGroup(partialGroup);\n    } catch (error) {\n      this.alertService.addServerFailure(error);\n    }\n  }\n\n  private setHintMsg() {\n    const filterMsgTranslated = this.translate.instant(this.filterMsg);\n    const canEditMsgTranslated = this.translate.instant(this.canEditMsg);\n    this.filterHintMsg = this.canEdit\n      ? `${filterMsgTranslated} ${canEditMsgTranslated}`\n      : this.filterMsg;\n  }\n\n  private async updateGroup(partialGroup: Partial<IManagedObject>) {\n    const { id } = this.group;\n    const group: Partial<IManagedObject> = { id, ...partialGroup };\n\n    const updatedGroup = (await this.inventory.update(group)).data;\n    this.setGroup(updatedGroup);\n  }\n\n  private async updateSmartGroup(partialGroup: Partial<IManagedObject>) {\n    const { id } = this.group;\n    const { c8y_DeviceQueryString } = partialGroup;\n    const group: Partial<IManagedObject> = { id, ...partialGroup };\n    let updatedGroup: IManagedObject;\n\n    if (!c8y_DeviceQueryString) {\n      updatedGroup = (await this.smartGroupsService.update(group)).data;\n      this.setGroup(updatedGroup);\n      return;\n    }\n\n    try {\n      const modalBody = gettext(\n        'You are about to change the smart group filter. Do you want to proceed?'\n      );\n      const title = gettext('Smart group filter');\n      await this.modalService.confirm(title, modalBody, Status.WARNING, {\n        ok: gettext('Save'),\n        cancel: gettext('Cancel')\n      });\n\n      if (!(await this.isQueryExecutable(c8y_DeviceQueryString))) {\n        return;\n      }\n    } catch (e) {\n      return;\n    }\n    updatedGroup = (await this.smartGroupsService.update(group)).data;\n    this.setGroup(updatedGroup);\n  }\n\n  private setGroup(group: IManagedObject) {\n    this.onGroupChange.emit(group);\n    this.alertService.success(this.GROUP_UPDATED_MSG);\n  }\n\n  private async isQueryExecutable(query: string): Promise<boolean> {\n    try {\n      const filter = { q: query };\n      await this.inventory.list(filter);\n      return true;\n    } catch (error) {\n      this.alertService.addServerFailure(error);\n      return false;\n    }\n  }\n}\n","import { Component, EventEmitter, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { IIdentified, IManagedObject } from '@c8y/client';\nimport { AppStateService, DisplayOptions } from '@c8y/ngx-components';\nimport { DeviceGroupService } from '@c8y/ngx-components/assets-navigator';\nimport { Subscription } from 'rxjs';\nimport { SubAssetsService } from './sub-assets.service';\n\n@Component({\n  selector: 'c8y-sub-assets',\n  templateUrl: './sub-assets.component.html'\n})\nexport class SubAssetsComponent implements OnInit, OnDestroy {\n  currentGroupId: IIdentified;\n  showChildrenForDevice: IManagedObject;\n  title: string;\n  toggle: boolean = false;\n  showAddGroup: boolean = false;\n  showAssignDevices: boolean = false;\n  requestInProgress: boolean;\n  group: IManagedObject;\n  showGroupInfo: boolean = true;\n  showAssignChildDevices: boolean = false;\n  refresh: EventEmitter<any> = new EventEmitter();\n  filterable: boolean = true;\n  displayOptions: DisplayOptions;\n  private dataSub: Subscription;\n\n  constructor(\n    private route: ActivatedRoute,\n    private appState: AppStateService,\n    private deviceGroupService: DeviceGroupService,\n    private subAssetsService: SubAssetsService\n  ) {\n    this.dataSub = this.route.parent.data.subscribe(({ contextData }) => {\n      this.title = contextData.name;\n      this.currentGroupId = contextData.id;\n      this.group = contextData;\n      this.filterable = !this.deviceGroupService.isDynamicGroup(contextData);\n    });\n  }\n\n  ngOnInit(): void {\n    this.appState.state$.subscribe(state => {\n      this.showGroupInfo = state.app.name === 'cockpit' || state.app.name === 'devicemanagement';\n    });\n\n    this.displayOptions = {\n      striped: true,\n      bordered: false,\n      gridHeader: true,\n      filter: !this.isSmartGroup()\n    };\n  }\n\n  groupChange(group: IManagedObject): void {\n    /**\n     * Group is cached in the context-route guard. To avoid loading old data (when switching tabs) we need to update\n     * this object in the cache.\n     */\n    Object.assign(this.group, group);\n    this.title = group.name;\n    this.refresh.emit();\n  }\n\n  isSmartGroup() {\n    return this.subAssetsService.isSmartGroup(this.group);\n  }\n\n  ngOnDestroy(): void {\n    if (this.dataSub) {\n      this.dataSub.unsubscribe();\n    }\n  }\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { IManagedObject } from '@c8y/client';\nimport {\n  ConfirmModalComponent,\n  gettext,\n  ModalLabels,\n  Status,\n  StatusType\n} from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Subject } from 'rxjs';\nimport { DeleteModalCheckboxes } from './delete-assets-modal.model';\n\n@Component({\n  selector: 'c8y-delete-assets-modal',\n  templateUrl: './delete-assets-modal.component.html'\n})\nexport class DeleteAssetsModalComponent {\n  @Input() showWithCascadeCheckbox: boolean = true;\n  @Input() showWithDeviceUserCheckbox: boolean = false;\n  @Input() asset: IManagedObject;\n  @ViewChild('modalRef', { static: false }) modalRef: ConfirmModalComponent;\n  closeSubject: Subject<DeleteModalCheckboxes> = new Subject();\n  labels: ModalLabels = { ok: gettext('Delete'), cancel: gettext('Cancel') };\n  title = gettext('Delete asset');\n  status: StatusType = Status.DANGER;\n  config: DeleteModalCheckboxes = {\n    cascade: false,\n    withDeviceUser: false\n  };\n  message: string;\n\n  constructor(private translateService: TranslateService) {}\n\n  ngOnInit() {\n    this.message = this.translateService.instant(\n      gettext(\n        'You are about to delete asset: \"{{name}}\". This operation is irreversible. Do you want to proceed?'\n      ),\n      { name: this.asset.name }\n    );\n  }\n\n  async ngAfterViewInit() {\n    try {\n      await this.modalRef.result;\n      this.onClose();\n    } catch (error) {\n      this.onDismiss();\n    }\n  }\n\n  onClose() {\n    this.closeSubject.next(this.config);\n    this.closeSubject.complete();\n  }\n\n  onDismiss() {\n    this.closeSubject.complete();\n  }\n}\n","import { Component, Input, ViewChild } from '@angular/core';\nimport { IManagedObject } from '@c8y/client';\nimport {\n  ConfirmModalComponent,\n  gettext,\n  ModalLabels,\n  Status,\n  StatusType\n} from '@c8y/ngx-components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Subject } from 'rxjs';\n@Component({\n  selector: 'c8y-unassign-modal',\n  templateUrl: './unassign-modal.component.html'\n})\nexport class UnassignModalComponent {\n  @Input() asset: IManagedObject;\n  @ViewChild('modalRef', { static: false }) modalRef: ConfirmModalComponent;\n  message: string;\n  closeSubject: Subject<boolean> = new Subject();\n  labels: ModalLabels = { ok: gettext('Unassign'), cancel: gettext('Cancel') };\n  title = gettext('Unassign devices');\n  status: StatusType = Status.WARNING;\n\n  constructor(private translateService: TranslateService) {}\n\n  ngOnInit() {\n    this.message = this.translateService.instant(\n      gettext('You are about to unassign asset: \"{{name}}\" . Do you want to proceed?'),\n      { name: this.asset.name }\n    );\n  }\n\n  async ngAfterViewInit() {\n    try {\n      await this.modalRef.result;\n      this.onClose();\n    } catch (error) {\n      this.onDismiss();\n    }\n  }\n\n  onClose() {\n    this.closeSubject.next(true);\n    this.closeSubject.complete();\n  }\n\n  onDismiss() {\n    this.closeSubject.complete();\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnInit,\n  Output,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { IManagedObject, SmartGroupsService } from '@c8y/client';\nimport {\n  ActionControl,\n  BuiltInActionType,\n  BulkActionControl,\n  DataGridComponent,\n  DataSourceModifier,\n  DisplayOptions,\n  gettext,\n  Pagination,\n  Row,\n  ServerSideDataResult\n} from '@c8y/ngx-components';\nimport { DeviceGridColumn } from '@c8y/ngx-components/device-grid';\nimport { BsModalService } from 'ngx-bootstrap/modal';\nimport { DeleteModalCheckboxes } from './delete-assets-modal';\nimport { DeleteAssetsModalComponent } from './delete-assets-modal/delete-assets-modal.component';\nimport { SubAssetsService } from './sub-assets.service';\nimport { UnassignModalComponent } from './unassign-assets-modal/unassign-modal.component';\n@Component({\n  selector: 'c8y-sub-assets-grid',\n  templateUrl: './sub-assets-grid.component.html'\n})\nexport class SubAssetsGridComponent implements OnInit {\n  @Input('parent-group') parentGroup: IManagedObject;\n  @Input() refresh: EventEmitter<any>;\n  @Input() title: string = gettext('Subassets');\n  @Input() emptyStateText: string = gettext(\n    'Add your first group or assign devices using the buttons on the toolbar.'\n  );\n  @Input() loadingItemsLabel: string = gettext('Loading assets…');\n\n  get columns() {\n    return this._columns;\n  }\n  @Input() set columns(value: DeviceGridColumn[]) {\n    if (value) {\n      this._columns = this.subAssetsGridService.getUserConfiguredColumns(value);\n    } else {\n      this._columns = this.subAssetsGridService.getUserConfiguredColumns(\n        this.subAssetsGridService.getDefaultColumns()\n      );\n    }\n  }\n  @Input('pagination') set _pagination(value: Pagination) {\n    if (value) {\n      this.pagination = value;\n    } else {\n      this.pagination = this.subAssetsGridService.getDefaultPagination();\n    }\n  }\n  @Input('actionControls') set _actionControls(value: ActionControl[]) {\n    if (value) {\n      this.actionControls = value;\n    } else {\n      this.actionControls = this.subAssetsGridService.getDefaultActionControls();\n    }\n  }\n  @Input() selectable: boolean = false;\n  @Input() baseQuery: any = {};\n  @Input('bulkActionControls') set _bulkActionControls(value: BulkActionControl[]) {\n    if (value) {\n      this.bulkActionControls = value;\n    } else {\n      this.bulkActionControls = this.subAssetsGridService.getDefaultBulkActionControls();\n    }\n  }\n  @Input() filterable: boolean = true;\n  @Input() sortable: boolean = true;\n  @Output() onColumnsChange: EventEmitter<DeviceGridColumn[]> = new EventEmitter<\n    DeviceGridColumn[]\n  >();\n  @Output() itemsSelect: EventEmitter<string[]> = new EventEmitter<string[]>();\n\n  pagination: Pagination = this.subAssetsGridService.getDefaultPagination();\n  actionControls: ActionControl[];\n  bulkActionControls: BulkActionControl[] = this.subAssetsGridService.getDefaultBulkActionControls();\n  serverSideDataCallback: any;\n\n  @ViewChild(DataGridComponent, { static: true })\n  dataGrid: DataGridComponent;\n\n  displayOptions: DisplayOptions = {\n    striped: true,\n    bordered: false,\n    gridHeader: true,\n    filter: true\n  };\n\n  private _columns: DeviceGridColumn[];\n\n  get isRootGroup() {\n    return !this.parentGroup;\n  }\n\n  get getInfiniteScrollMode() {\n    return this.isRootGroup && this.subAssetsGridService.isUsingInventoryRoles()\n      ? 'auto'\n      : undefined;\n  }\n\n  @Input('displayOptions')\n  set _displayOptions(displayOptions) {\n    this.displayOptions = { ...this.displayOptions, ...displayOptions };\n  }\n\n  constructor(\n    public subAssetsGridService: SubAssetsService,\n    private bsModalService: BsModalService,\n    private smartGroupsService: SmartGroupsService\n  ) {\n    this.serverSideDataCallback = this.onDataSourceModifier.bind(this);\n  }\n\n  ngOnInit() {\n    this.columns = this.subAssetsGridService.getDefaultColumns(this.filterable, this.sortable);\n    if (!this.filterable || !this.sortable) {\n      this.columns.forEach(column => {\n        column.filterable = this.filterable;\n        column.sortable = this.sortable;\n      });\n    }\n    this.setActionControls();\n  }\n\n  async setActionControls() {\n    const actionControls: ActionControl[] = [];\n    const {\n      data: isMicroserviceInstalled\n    } = await this.smartGroupsService.isSmartGroupsV2MicroserviceInstalled();\n\n    const deleteAction: ActionControl = {\n      type: BuiltInActionType.Delete,\n      callback: (asset: Row) => this.onDeleteAsset(asset as IManagedObject, this.parentGroup),\n      showIf: (asset: Row) => {\n        if (this.smartGroupsService.isSmartGroupV2(asset as IManagedObject)) {\n          return isMicroserviceInstalled ? this.subAssetsGridService.canDeleteSmartGroup() : false;\n        }\n\n        if (this.smartGroupsService.isSmartGroup(asset as IManagedObject)) {\n          return this.subAssetsGridService.canDeleteSmartGroup();\n        }\n\n        return true;\n      }\n    };\n\n    actionControls.push(deleteAction);\n\n    const unassignAction: ActionControl = {\n      type: 'UNASSIGN',\n      icon: 'unlink',\n      text: gettext('Unassign'),\n      callback: (asset: Row) => this.onUnassignAsset(asset as IManagedObject, this.parentGroup),\n      showIf: (asset: Row) =>\n        this.subAssetsGridService.isDevice(asset as IManagedObject) &&\n        !this.subAssetsGridService.isSmartGroup(this.parentGroup as IManagedObject)\n    };\n\n    actionControls.push(unassignAction);\n\n    if (!this.actionControls) {\n      this.actionControls = actionControls;\n    }\n  }\n\n  onUnassignAsset(asset: IManagedObject, parentRef: IManagedObject) {\n    const initialState = {\n      asset\n    };\n    const modalRef = this.bsModalService.show(UnassignModalComponent, { initialState });\n\n    modalRef.content.closeSubject.subscribe(async (result: boolean) => {\n      if (result) {\n        await this.subAssetsGridService.unassignAsset(asset, parentRef);\n        this.refresh.emit();\n      }\n    });\n  }\n\n  async onDeleteAsset(asset: IManagedObject, parentRef: IManagedObject) {\n    const initialState = {\n      showWithDeviceUserCheckbox: this.subAssetsGridService.shouldShowWithDeviceUserCheckbox(asset),\n      asset,\n      showWithCascadeCheckbox:\n        !this.smartGroupsService.isSmartGroup(asset) &&\n        !this.smartGroupsService.isSmartGroupV2(asset)\n    };\n\n    const modalRef = this.bsModalService.show(DeleteAssetsModalComponent, { initialState });\n\n    modalRef.content.closeSubject.subscribe(async (result: DeleteModalCheckboxes) => {\n      if (result) {\n        this.subAssetsGridService.uiOnlyCountersUpdate.next('DECREASE');\n        await this.subAssetsGridService.deleteAsset(asset, parentRef, result);\n        this.refresh.emit();\n      }\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.parentGroup && !changes.parentGroup.firstChange) {\n      this.dataGrid.reload();\n    }\n  }\n\n  trackByName(_index, column: DeviceGridColumn): string {\n    return column.name;\n  }\n\n  async onDataSourceModifier(\n    dataSourceModifier: DataSourceModifier\n  ): Promise<ServerSideDataResult> {\n    const promises = [];\n    let counters;\n\n    promises.push(\n      this.subAssetsGridService.getData(\n        dataSourceModifier.columns,\n        dataSourceModifier.pagination,\n        this.parentGroup,\n        this.baseQuery\n      )\n    );\n\n    const action = this.subAssetsGridService.uiOnlyCountersUpdate.value;\n    if (action) {\n      counters = this.uiOnlyCountersUpdate(action);\n      this.subAssetsGridService.uiOnlyCountersUpdate.next(null);\n    } else {\n      promises.push(this.subAssetsGridService.getTotal(this.parentGroup, this.baseQuery));\n      promises.push(\n        this.subAssetsGridService.getCount(\n          dataSourceModifier.columns,\n          dataSourceModifier.pagination,\n          this.parentGroup,\n          this.baseQuery\n        )\n      );\n    }\n    const [dataResponse, size, filteredSize] = await Promise.all(promises);\n    if (!counters) {\n      counters = {\n        size,\n        filteredSize\n      };\n    }\n    this.onColumnsChange.emit(dataSourceModifier.columns);\n\n    return {\n      res: dataResponse.res,\n      data: dataResponse.data,\n      paging: dataResponse.paging,\n      ...counters\n    };\n  }\n\n  configChange(config) {\n    this.subAssetsGridService.saveConfig(config);\n  }\n\n  // workaround since the totalPages value is cached on the BE\n  private uiOnlyCountersUpdate(action: 'INCREASE' | 'DECREASE') {\n    const currentAllItemsCount = this.dataGrid.filteringLabelsParams.allItemsCount;\n    const currentFilteredItemsCount = this.dataGrid.filteringLabelsParams.filteredItemsCount;\n    let counters;\n    if (action === 'DECREASE') {\n      counters = {\n        size: currentAllItemsCount - 1,\n        filteredSize: currentFilteredItemsCount - 1\n      };\n    }\n    if (action === 'INCREASE') {\n      counters = {\n        size: currentAllItemsCount + 1,\n        filteredSize: currentFilteredItemsCount + 1\n      };\n    }\n    return counters;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { IIdentified, IManagedObject, InventoryService } from '@c8y/client';\nimport { GroupForm } from './add-group.model';\nimport { GroupFragment } from '@c8y/ngx-components/assets-navigator';\n\n@Injectable()\nexport class AddGroupService {\n  private GROUP_FRAGMENT_TYPE = 'c8y_IsDeviceGroup';\n\n  constructor(private inventoryService: InventoryService) {}\n\n  async createGroupAndAssignDevices(\n    groupForm: GroupForm,\n    groupContextId: string | number,\n    selectedDevices: string[]\n  ): Promise<IManagedObject | IIdentified> {\n    let group: IManagedObject | IIdentified;\n    const { name, description } = groupForm;\n    const newGroupMO = this.getGroupMO(name, description, groupContextId);\n\n    if (groupContextId) {\n      group = (await this.inventoryService.childAssetsCreate(newGroupMO, groupContextId)).data;\n    } else {\n      group = (await this.inventoryService.create(newGroupMO)).data;\n    }\n\n    if (selectedDevices.length > 0) {\n      await this.assignDevices(group.id, selectedDevices);\n    }\n\n    return group;\n  }\n\n  private getGroupMO(\n    name: string,\n    description: string = '',\n    groupContextId: string | number\n  ): Partial<IManagedObject> {\n    const group = {\n      type: this.getGroupType(groupContextId),\n      [this.GROUP_FRAGMENT_TYPE]: {},\n      name,\n      description\n    };\n\n    return group;\n  }\n\n  private getGroupType(\n    groupContextId: string | number\n  ): GroupFragment.subGroupType | GroupFragment.groupType {\n    return groupContextId ? GroupFragment.subGroupType : GroupFragment.groupType;\n  }\n\n  private async assignDevices(id: string | number, selectedDevices: string[]) {\n    const promises = [];\n\n    selectedDevices.forEach(moId => {\n      promises.push(this.inventoryService.childAssetsAdd(moId, id));\n    });\n\n    return await Promise.all(promises);\n  }\n}\n","import {\n  Component,\n  Output,\n  EventEmitter,\n  ViewChild,\n  Input,\n  HostListener,\n  ElementRef\n} from '@angular/core';\nimport { FormGroup, Validators, FormBuilder } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { DeviceGridService } from '@c8y/ngx-components/device-grid';\nimport { C8yStepper, Pagination, AlertService, gettext } from '@c8y/ngx-components';\nimport { AddGroupService } from './add-group.service';\nimport { SubAssetsService } from '../sub-assets.service';\n\n@Component({\n  selector: 'c8y-add-group',\n  templateUrl: './add-group.component.html'\n})\nexport class AddGroupComponent {\n  @Input() currentGroupId: string;\n  @Input() refresh = new EventEmitter<any>();\n  @Output() onDeviceQueryStringChange: EventEmitter<string> = new EventEmitter<string>();\n  @Output() onCancel = new EventEmitter<any>();\n  @ViewChild(C8yStepper, { static: false })\n  stepper: C8yStepper;\n  @ViewChild('nameRef', { static: false })\n  nameInputRef: ElementRef;\n  deviceQueryStringOutput: string;\n  formGroupStepOne: FormGroup;\n  pendingStatus: boolean = false;\n  pagination: Pagination = { pageSize: 20, currentPage: 1 };\n  selected: string[] = [];\n  subscription: Subscription;\n\n  readonly ITEMS_SELECT_LIMIT: number = 15;\n  readonly btnLabels = {\n    next: gettext('Next'),\n    cancel: gettext('Cancel'),\n    create: gettext('Create')\n  };\n\n  private nameInput: HTMLInputElement;\n\n  constructor(\n    protected deviceGridService: DeviceGridService,\n    private fb: FormBuilder,\n    private addGroupService: AddGroupService,\n    private alert: AlertService,\n    private subAssetsService: SubAssetsService\n  ) {}\n\n  @HostListener('document:keydown.enter', ['$event']) onEnterKeyDown(event: KeyboardEvent) {\n    // Order matters! Needs to be placed before this.stepper.next\n    if (this.stepper.selectedIndex === 1) {\n      this.createGroup();\n    }\n    this.stepper.next();\n  }\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeKeyDown(event: KeyboardEvent) {\n    this.onCancel.emit();\n  }\n\n  @HostListener('document:keydown.backspace', ['$event']) onBackspaceKeyDown(event: KeyboardEvent) {\n    this.stepper.previous();\n\n    setTimeout(() => {\n      this.setFocusOnNameInput();\n    });\n  }\n\n  ngOnInit() {\n    this.formGroupStepOne = this.fb.group({\n      name: ['', Validators.required],\n      description: ['']\n    });\n    this.subscription = this.onCancel.subscribe(() => this.resetStepper());\n  }\n\n  ngAfterViewInit() {\n    this.nameInput = this.nameInputRef.nativeElement as HTMLInputElement;\n    this.setFocusOnNameInput();\n  }\n\n  async createGroup() {\n    this.pendingStatus = true;\n    this.subAssetsService.uiOnlyCountersUpdate.next('INCREASE');\n    await this.addGroupService.createGroupAndAssignDevices(\n      this.formGroupStepOne.value,\n      this.currentGroupId,\n      this.selected\n    );\n\n    this.pendingStatus = false;\n    this.resetStepper();\n    this.alert.success(gettext('Group created.'));\n\n    this.refresh.emit();\n    this.onCancel.emit();\n  }\n\n  onSelected(selectedDevicesIDs: string[]) {\n    this.selected = selectedDevicesIDs;\n  }\n\n  resetStepper() {\n    this.stepper.reset();\n    this.stepper.selectedIndex = 1;\n    this.selected = [];\n  }\n\n  ngOnDestroy() {\n    if (this.subscription) {\n      this.subscription.unsubscribe();\n    }\n  }\n\n  private setFocusOnNameInput() {\n    if (this.nameInput) {\n      this.nameInput.focus();\n      this.nameInput.select();\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CoreModule, HOOK_ONCE_ROUTE } from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\nimport { AddGroupComponent } from './add-group.component';\nimport { AddGroupService } from './add-group.service';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\n\n@NgModule({\n  declarations: [AddGroupComponent],\n  imports: [CoreModule, DeviceGridModule, FormsModule, ReactiveFormsModule],\n  entryComponents: [AddGroupComponent],\n  exports: [AddGroupComponent],\n  providers: [\n    {\n      provide: HOOK_ONCE_ROUTE,\n      useValue: [\n        {\n          path: 'add-group',\n          component: AddGroupComponent\n        }\n      ],\n      multi: true\n    },\n    AddGroupService\n  ]\n})\nexport class AddGroupModule {}\n","import { Component, EventEmitter, OnInit } from '@angular/core';\nimport { Permissions } from '@c8y/ngx-components';\n\n@Component({\n  selector: 'c8y-groups-name',\n  templateUrl: './groups.component.html'\n})\nexport class GroupsComponent implements OnInit {\n  refresh: EventEmitter<any> = new EventEmitter();\n  showAddGroup = false;\n  filterable: boolean = false;\n  sortable: boolean = true;\n\n  constructor(private permissions: Permissions) {}\n\n  ngOnInit() {\n    if (!this.permissions.hasRole('ROLE_INVENTORY_READ')) {\n      this.sortable = false;\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { InventoryService } from '@c8y/client';\n\n@Injectable()\nexport class AssignDevicesService {\n  constructor(private inventoryService: InventoryService) {}\n\n  async assignDevices(id: string | number, selectedDevices: string[]) {\n    const promises = [];\n\n    selectedDevices.forEach(moId => {\n      promises.push(this.inventoryService.childAssetsAdd(moId, id));\n    });\n\n    return await Promise.all(promises);\n  }\n}\n","import { Component, Input, Output, EventEmitter, HostListener } from '@angular/core';\nimport { Pagination, AlertService, gettext, ActionControl, Row } from '@c8y/ngx-components';\nimport { InventoryService } from '@c8y/client';\nimport { SubAssetsService } from '../sub-assets.service';\nimport { IManagedObject } from '@c8y/client';\nimport { QueriesUtil } from '@c8y/client';\nimport { AssignDevicesService } from './assign-devices.service';\n\n@Component({\n  selector: 'c8y-assign-devices',\n  templateUrl: './assign-devices.component.html'\n})\nexport class AssignDevicesComponent {\n  @Input() currentGroupId: string;\n  @Input() refresh = new EventEmitter<any>();\n  @Output() onCancel = new EventEmitter<any>();\n  @Output() onShowChildDevices = new EventEmitter<boolean>();\n  @Output() selectedDevice = new EventEmitter<IManagedObject>();\n\n  deviceQueryStringOutput: string;\n  pendingStatus: boolean = false;\n  pagination: Pagination = { pageSize: 20, currentPage: 1 };\n  selected: string[] = [];\n  baseQuery: any;\n  canAssignDevice: boolean = false;\n  actionControls: ActionControl[] = [];\n  readonly isSelectable = true;\n  readonly itemsSelectLimit = 15;\n  private queriesUtil: QueriesUtil;\n\n  constructor(private assignDevicesService: AssignDevicesService, private alert: AlertService) {\n    this.queriesUtil = new QueriesUtil();\n  }\n\n  @HostListener('document:keydown.enter', ['$event']) onEnterKeyDown(event: KeyboardEvent) {\n    if (this.selected.length > 0) {\n      this.assignDevices();\n    }\n  }\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeKeyDown(event: KeyboardEvent) {\n    this.onCancel.emit();\n  }\n\n  ngOnInit() {\n    this.setNotIncludedInGroupQuery();\n  }\n\n  setNotIncludedInGroupQuery() {\n    const notIncludedInGroupQuery = { __not: { __bygroupid: this.currentGroupId } };\n    this.baseQuery = notIncludedInGroupQuery;\n  }\n\n  setActionControls(showChildren: boolean) {\n    const actionControls: ActionControl[] = [];\n    const selectChildrenAction: ActionControl = {\n      type: 'SELECT_CHILDREN',\n      icon: 'enter-bottom',\n      text: gettext('Select children'),\n      callback: (asset: Row) => this.selectChildren(asset as IManagedObject),\n      showIf: (asset: Row) =>\n        asset.childDevices.references.length > 0\n    };\n\n    if (showChildren) {\n      actionControls.push(selectChildrenAction);\n    }\n    this.actionControls = actionControls;\n    this.refresh.emit();\n  }\n\n  async assignDevices() {\n    this.pendingStatus = true;\n    await this.assignDevicesService.assignDevices(this.currentGroupId, this.selected);\n    this.pendingStatus = false;\n    this.selected = [];\n\n    this.onCancel.emit();\n    this.refresh.emit();\n\n    this.alert.success(gettext('Devices assigned to the group.'));\n  }\n\n  onSelected(selectedDevicesIDs: string[]) {\n    this.selected = selectedDevicesIDs;\n  }\n\n  selectChildren(asset: IManagedObject) {\n    this.onShowChildDevices.emit(true);\n    this.selectedDevice.emit(asset);\n  }\n}\n","import { Component, Input, Output, EventEmitter, HostListener } from '@angular/core';\nimport { AlertService, gettext } from '@c8y/ngx-components';\nimport { InventoryService } from '@c8y/client';\nimport { SubAssetsService } from '../sub-assets.service';\nimport { IManagedObject } from '@c8y/client';\nimport { AssignDevicesService } from './assign-devices.service';\n\n@Component({\n  selector: 'c8y-assign-child-devices',\n  templateUrl: './assign-child-devices.component.html'\n})\nexport class AssignChildDevicesComponent {\n  @Input() currentGroupId: string;\n  @Input() parentDevice: IManagedObject;\n  @Output() onCancel = new EventEmitter<any>();\n  @Input() refresh = new EventEmitter<any>();\n\n  selected: string[] = [];\n  baseQuery: any;\n  pendingStatus: boolean = false;\n\n  constructor(\n    private alert: AlertService,\n    private subAssetsService: SubAssetsService,\n    private inventoryService: InventoryService,\n    private assignDevicesService: AssignDevicesService\n  ) {}\n\n  @HostListener('document:keydown.enter', ['$event']) onEnterKeyDown(event: KeyboardEvent) {\n    if (this.selected.length > 0) {\n      this.assignDevices();\n    }\n  }\n\n  @HostListener('document:keydown.escape', ['$event']) onEscapeKeyDown(event: KeyboardEvent) {\n    this.onCancel.emit();\n  }\n\n  async ngOnInit() {\n    this.setNotIncludedInGroupQuery();\n  }\n\n  setNotIncludedInGroupQuery() {\n    const notIncludedInGroupQuery = { __not: { __bygroupid: this.currentGroupId } };\n    this.baseQuery = notIncludedInGroupQuery;\n  }\n\n  async assignDevices() {\n    this.pendingStatus = true;\n\n    try {\n      await this.assignDevicesService.assignDevices(this.currentGroupId, this.selected);\n      this.refresh.emit();\n      this.alert.success(gettext('Child devices assigned to the group.'));\n    } catch (error) {\n      this.alert.danger(gettext('Could not assign child devices to the group'), error);\n    }\n    this.pendingStatus = false;\n    this.selected = [];\n    this.onCancel.emit();\n  }\n\n  onSelected(selectedDevicesIDs: string[]) {\n    this.selected = selectedDevicesIDs;\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CoreModule, gettext, HOOK_ONCE_ROUTE, ViewContext } from '@c8y/ngx-components';\nimport { DeviceGridModule } from '@c8y/ngx-components/device-grid';\nimport { PopoverModule } from 'ngx-bootstrap/popover';\nimport { AddGroupModule } from './add-group/add-group.module';\nimport { AssetTypeCellRendererComponent } from './columns/asset-type.cell-renderer.component';\nimport { DeleteAssetsModalComponent } from './delete-assets-modal/delete-assets-modal.component';\nimport { GroupInfoComponent } from './group-info.component';\nimport { GroupsComponent } from './groups.component';\nimport { SubAssetsGridComponent } from './sub-assets-grid.component';\nimport { SubAssetsComponent } from './sub-assets.component';\nimport { SubAssetsService } from './sub-assets.service';\nimport { UnassignModalComponent } from './unassign-assets-modal/unassign-modal.component';\nimport { AssignDevicesComponent } from './assign-devices/assign-devices.component';\nimport { AssignChildDevicesComponent } from './assign-devices/assign-child-devices.component';\nimport { AssignDevicesService } from './assign-devices/assign-devices.service';\n\n@NgModule({\n  declarations: [\n    SubAssetsComponent,\n    SubAssetsGridComponent,\n    AssetTypeCellRendererComponent,\n    GroupsComponent,\n    GroupInfoComponent,\n    DeleteAssetsModalComponent,\n    UnassignModalComponent,\n    AssignDevicesComponent,\n    AssignChildDevicesComponent\n  ],\n  imports: [CoreModule, DeviceGridModule, AddGroupModule, PopoverModule],\n  entryComponents: [\n    SubAssetsComponent,\n    AssetTypeCellRendererComponent,\n    GroupsComponent,\n    DeleteAssetsModalComponent,\n    UnassignModalComponent\n  ],\n  exports: [],\n  providers: [\n    {\n      provide: HOOK_ONCE_ROUTE,\n      useValue: [\n        {\n          context: ViewContext.Group,\n          path: 'subassets',\n          priority: 1000,\n          icon: 'c8y-group-open',\n          label: gettext('Subassets'),\n          component: SubAssetsComponent\n        },\n        {\n          path: 'group',\n          component: GroupsComponent\n        }\n      ],\n      multi: true\n    },\n    SubAssetsService,\n    AssignDevicesService\n  ]\n})\nexport class SubAssetsModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {AddGroupComponent as ɵf} from './add-group/add-group.component';\nexport {AddGroupModule as ɵe} from './add-group/add-group.module';\nexport {AddGroupService as ɵg} from './add-group/add-group.service';\nexport {AssignDevicesService as ɵd} from './assign-devices/assign-devices.service';\nexport {AssetTypeCellRendererComponent as ɵa} from './columns/asset-type.cell-renderer.component';\nexport {DeleteAssetsModalComponent as ɵb} from './delete-assets-modal/delete-assets-modal.component';\nexport {UnassignModalComponent as ɵc} from './unassign-assets-modal/unassign-modal.component';"],"names":["tslib_1.__decorate"],"mappings":"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"}